!function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(e=e.toLowerCase();t&&t.parentNode;)if(t=t.parentNode,t.tagName&&t.tagName.toLowerCase()===e)return t;return null}},function(t,e,o){"use strict";function n(t){var e=p.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function r(t,e){for(var o=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=o.length,r=o[n-1],s=!1,a=0;n--;)"."===o[n]?o.splice(n,1):".."===o[n]?(o.splice(n,1),a++):a&&(0===n&&(s=!0),o.splice(n,1),a--);return s&&o.unshift(""),"."!==r&&".."!==r||o.push(""),o.join("/")}function s(t,e,o){if(!(this instanceof s))return new s(t,e,o);var a,c,p,f,h,m,v=d.slice(),y=typeof e,b=this,g=0;for("object"!==y&&"string"!==y&&(o=e,e=null),o&&"function"!=typeof o&&(o=l.parse),e=u(e),c=n(t||""),a=!c.protocol&&!c.slashes,b.slashes=c.slashes||a&&e.slashes,b.protocol=c.protocol||e.protocol||"",t=c.rest,c.slashes||(v[2]=[/(.*)/,"pathname"]);g<v.length;g++)f=v[g],p=f[0],m=f[1],p!==p?b[m]=t:"string"==typeof p?~(h=t.indexOf(p))&&("number"==typeof f[2]?(b[m]=t.slice(0,h),t=t.slice(h+f[2])):(b[m]=t.slice(h),t=t.slice(0,h))):(h=p.exec(t))&&(b[m]=h[1],t=t.slice(0,h.index)),b[m]=b[m]||(a&&f[3]?e[m]||"":""),f[4]&&(b[m]=b[m].toLowerCase());o&&(b.query=o(b.query)),a&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=r(b.pathname,e.pathname)),i(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(f=b.auth.split(":"),b.username=f[0]||"",b.password=f[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}function a(t,e,o){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(o||l.parse)(e)),n[t]=e;break;case"port":n[t]=e,i(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!o;break;case"pathname":n.pathname=e.length&&"/"!==e.charAt(0)?"/"+e:e;break;default:n[t]=e}for(var r=0;r<d.length;r++){var s=d[r];s[4]&&(n[s[1]]=n[s[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function c(t){t&&"function"==typeof t||(t=l.stringify);var e,o=this,n=o.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var r=n+(o.slashes?"//":"");return o.username&&(r+=o.username,o.password&&(r+=":"+o.password),r+="@"),r+=o.host+o.pathname,e="object"==typeof o.query?t(o.query):o.query,e&&(r+="?"!==e.charAt(0)?"?"+e:e),o.hash&&(r+=o.hash),r}var i=o(8),u=o(9),l=o(7),p=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,d=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];s.prototype={set:a,toString:c},s.extractProtocol=n,s.location=u,s.qs=l,t.exports=s},,function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return'<i class="fa fa-fw fa-'+t+'" aria-hidden="true" data-hover="tooltip" data-tooltip-delay="350" data-tooltip-content="'+e+'"></i>'}var s=o(0),a=n(s);t.exports=function(){var t=document.createElement("div");t.className="custom-button",t.innerHTML="\n"+r("fire","熱門粉專")+"\n"+r("bar-chart","個人統計")+"\n"+r("history","歷史回顧")+"\n"+r("cog","設定"),(0,a.default)(document.querySelector("div.custom-search-bar"),"div").append(t),document.querySelectorAll(".custom-button i").forEach(function(t){t.addEventListener("click",function(t){document.querySelector(".custom-modal").style.display="block",document.querySelector("#custom-modal-title").innerText=t.target.dataset.tooltipContent})})}},function(t,e,o){"use strict";t.exports=function(){var t=document.createElement("div");t.className="custom-modal",t.style.display="none",t.innerHTML='\n<div class="background"></div>\n<div class="box">\n  <div class="header">\n    <div style="margin-left: 1rem;">\n      <b id="custom-modal-title"></b>\n    </div>\n    <div class="close-button">\n      <i class="fa fa-lg fa-times" aria-hidden="true"></i>\n    </div>\n  </div>\n  <div class="content"></div>\n</div>',document.body.append(t);var e=function(){t.style.display="none"};document.querySelector(".custom-modal .background").onclick=e,document.querySelector(".custom-modal .close-button i").onclick=e}},function(t,e,o){"use strict";t.exports=function(t){t.className+=" custom-navbar"}},function(t,e,o){"use strict";t.exports=function(t){var e=document.createElement("div");e.className="custom-search-bar",e.innerHTML='\n<form>\n  <div>\n    <input id="custom-search-input" type="text" placeholder="Search DB">\n  </div>\n</form>',t.append(e)}},function(t,e,o){"use strict";function n(t){for(var e,o=/([^=?&]+)=?([^&]*)/g,n={};e=o.exec(t);n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return n}function r(t,e){e=e||"";var o=[];"string"!=typeof e&&(e="?");for(var n in t)s.call(t,n)&&o.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return o.length?e+o.join("&"):""}var s=Object.prototype.hasOwnProperty;e.stringify=r,e.parse=n},function(t,e,o){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,o){"use strict";(function(e){var n,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s={hash:1,query:1};t.exports=function(t){t=t||e.location||{},n=n||o(1);var a,c={},i=typeof t;if("blob:"===t.protocol)c=new n(unescape(t.pathname),{});else if("string"===i){c=new n(t,{});for(a in s)delete c[a]}else if("object"===i){for(a in t)a in s||(c[a]=t[a]);void 0===c.slashes&&(c.slashes=r.test(t.href))}return c}}).call(e,o(10))},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=o(0),s=n(r);document.onreadystatechange=function(){if("interactive"===document.readyState){var t=function(){var t=document.querySelector('div[role="search"]');return t||(t=(0,s.default)(document.querySelector('form[role="search"]'),"div")),(0,s.default)(t,"div")}();o(5)(t),o(6)(t),o(3)(),o(4)(),o(13)(),o(14)()}}},,function(t,e,o){"use strict";var n=function t(){var e=document.querySelectorAll('input[name="q"]');2>e.length&&!document.querySelector("#q")?window.setTimeout(t,1e3):e.item(e.length-1).addEventListener("input",function(t){document.querySelector("#custom-search-input").value=t.target.value})};t.exports=n},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=o(1),s=n(r),a=o(0),c=n(a);t.exports=function(){var t=function(t){if(t.endsWith(":3")||t.includes("story_fbid"))return null;if(t.includes("photo.php"))return(0,s.default)(t,!0).query.fbidsss||null;var e=t.split("/");return(t.includes("photos")||t.endsWith("/"))&&e.pop(),e.pop()},e=function(t){var e=t.getBoundingClientRect(),o={top:window.scrollY,bottom:window.scrollY+document.documentElement.clientHeight},n={top:t.offsetTop+e.height/3,bottom:t.offsetTop+e.height/3*2};return n.top>o.top&&n.top<o.bottom||n.bottom>o.top&&n.bottom<o.bottom},o=0,n=[];window.onscroll=function(){if("/"!==window.location.pathname)return void(o=0);document.querySelectorAll('div[id^="hyperfeed_story_id"]').forEach(function(r){var s=r.querySelector('a[href^="https://l.facebook.com/l.php"]');if(s)switch(s.innerText){case"Sponsored":case"贊助":case"広告":return r.remove()}var a=r.querySelector("abbr.timestamp.livetimestamp");if(a){var i=(0,c.default)(a,"div").querySelector("[data-tooltip-content]");if(i&&(i=i.getAttribute("data-tooltip-content"),i.includes("Public")||i.includes("公開"))){var u=t((0,c.default)(a,"a").href);u&&!n.includes(u)&&(n.push(u),chrome.storage.local.set({feeds:n})),e(r)&&(0>window.scrollY-o?console.log("back",u):console.log(u))}}}),o=window.scrollY}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udGVudC1zY3JpcHRzLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA1ZmExZGM1NWJhYjAzMWYwMWMwNCIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvdXAtdG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi91cmwtcGFyc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRlbnQtc2NyaXB0cy9pbml0aWFsaXphdGlvbnMvYnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250ZW50LXNjcmlwdHMvaW5pdGlhbGl6YXRpb25zL21vZGFsLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250ZW50LXNjcmlwdHMvaW5pdGlhbGl6YXRpb25zL25hdmJhci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udGVudC1zY3JpcHRzL2luaXRpYWxpemF0aW9ucy9zZWFyY2gtYmFyLmpzIiwid2VicGFjazovLy8uL34vcXVlcnlzdHJpbmdpZnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZXF1aXJlcy1wb3J0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdXJsLXBhcnNlL2xvbGNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250ZW50LXNjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRlbnQtc2NyaXB0cy9tb25pdG9ycy9mYWNlYm9vay1zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRlbnQtc2NyaXB0cy9tb25pdG9ycy91c2VyLWZlZWQuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZGVmYXVsdCIsImVsIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImV4dHJhY3RQcm90b2NvbCIsImFkZHJlc3MiLCJtYXRjaCIsInByb3RvY29scmUiLCJleGVjIiwicHJvdG9jb2wiLCJzbGFzaGVzIiwicmVzdCIsInJlc29sdmUiLCJyZWxhdGl2ZSIsImJhc2UiLCJwYXRoIiwic3BsaXQiLCJzbGljZSIsImNvbmNhdCIsImxlbmd0aCIsImxhc3QiLCJ1bnNoaWZ0IiwidXAiLCJzcGxpY2UiLCJwdXNoIiwiam9pbiIsIlVSTCIsImxvY2F0aW9uIiwicGFyc2VyIiwidGhpcyIsImV4dHJhY3RlZCIsInBhcnNlIiwiaW5zdHJ1Y3Rpb24iLCJpbmRleCIsImtleSIsImluc3RydWN0aW9ucyIsInJ1bGVzIiwidHlwZSIsInVybCIsInFzIiwibG9sY2F0aW9uIiwiaW5kZXhPZiIsInF1ZXJ5IiwicGF0aG5hbWUiLCJjaGFyQXQiLCJyZXF1aXJlZCIsInBvcnQiLCJob3N0IiwiaG9zdG5hbWUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiYXV0aCIsIm9yaWdpbiIsImhyZWYiLCJ0b1N0cmluZyIsInNldCIsInBhcnQiLCJmbiIsInRlc3QiLCJwb3AiLCJpbnMiLCJzdHJpbmdpZnkiLCJyZXN1bHQiLCJoYXNoIiwiTmFOIiwidW5kZWZpbmVkIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsImljb25Ob2RlIiwiaWNvbiIsIl91cFRvIiwiX3VwVG8yIiwibm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImlubmVySFRNTCIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5uZXJUZXh0IiwidGFyZ2V0IiwiZGF0YXNldCIsInRvb2x0aXBDb250ZW50IiwiYm9keSIsImNsb3NlRXZlbnQiLCJvbmNsaWNrIiwiZG9tIiwicXVlcnlzdHJpbmciLCJkZWNvZGVVUklDb21wb25lbnQiLCJxdWVyeXN0cmluZ2lmeSIsInByZWZpeCIsInBhaXJzIiwiaGFzIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2xvYmFsIiwiaWdub3JlIiwibG9jIiwiZmluYWxkZXN0aW5hdGlvbiIsInVuZXNjYXBlIiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsIndpbmRvdyIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzZWFyY2giLCJmYlNlYXJjaElucHV0cyIsInNldFRpbWVvdXQiLCJpdGVtIiwiX3VybFBhcnNlIiwiX3VybFBhcnNlMiIsInJldHJpZXZlRmJpZEZyb21VcmwiLCJlbmRzV2l0aCIsImluY2x1ZGVzIiwiZmJpZHNzcyIsInF1ZXVlIiwiaXNGZWVkSW5TY3JlZW4iLCJmZWVkIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInNjcmVlbiIsInRvcCIsInNjcm9sbFkiLCJib3R0b20iLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJvZmZzZXRUb3AiLCJoZWlnaHQiLCJsYXN0WSIsImZlZWRzIiwib25zY3JvbGwiLCJpc1Nwb25zb3JlZCIsInJlbW92ZSIsImZlZWRUaW1lIiwiaXNQdWJsaWMiLCJnZXRBdHRyaWJ1dGUiLCJmYmlkIiwiY2hyb21lIiwic3RvcmFnZSIsImxvY2FsIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9B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b250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbi8qKlxuICogRmluZCBmaXJzdCBhbmNlc3RvciBvZiBlbCB3aXRoIHRhZ05hbWUgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZC5cbiAqXG4gKiBAcGFyYW0gZWxcbiAqIEBwYXJhbSB0YWdOYW1lXG4gKiBAcmV0dXJucyB7Kn1cbiAqXG4gKiBAcmVmZXJlbmNlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzY4NTcxMTZcbiAqL1xuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGVsLCB0YWdOYW1lKSB7XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgd2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUpIHtcbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG5cbiAgICBpZiAoZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZ05hbWUpIHtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgcmVxdWlyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpXG4gICwgbG9sY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KVxuICAsIHFzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KVxuICAsIHByb3RvY29scmUgPSAvXihbYS16XVthLXowLTkuKy1dKjopPyhcXC9cXC8pPyhbXFxTXFxzXSopL2k7XG5cbi8qKlxuICogVGhlc2UgYXJlIHRoZSBwYXJzZSBydWxlcyBmb3IgdGhlIFVSTCBwYXJzZXIsIGl0IGluZm9ybXMgdGhlIHBhcnNlclxuICogYWJvdXQ6XG4gKlxuICogMC4gVGhlIGNoYXIgaXQgTmVlZHMgdG8gcGFyc2UsIGlmIGl0J3MgYSBzdHJpbmcgaXQgc2hvdWxkIGJlIGRvbmUgdXNpbmdcbiAqICAgIGluZGV4T2YsIFJlZ0V4cCB1c2luZyBleGVjIGFuZCBOYU4gbWVhbnMgc2V0IGFzIGN1cnJlbnQgdmFsdWUuXG4gKiAxLiBUaGUgcHJvcGVydHkgd2Ugc2hvdWxkIHNldCB3aGVuIHBhcnNpbmcgdGhpcyB2YWx1ZS5cbiAqIDIuIEluZGljYXRpb24gaWYgaXQncyBiYWNrd2FyZHMgb3IgZm9yd2FyZCBwYXJzaW5nLCB3aGVuIHNldCBhcyBudW1iZXIgaXQnc1xuICogICAgdGhlIHZhbHVlIG9mIGV4dHJhIGNoYXJzIHRoYXQgc2hvdWxkIGJlIHNwbGl0IG9mZi5cbiAqIDMuIEluaGVyaXQgZnJvbSBsb2NhdGlvbiBpZiBub24gZXhpc3RpbmcgaW4gdGhlIHBhcnNlci5cbiAqIDQuIGB0b0xvd2VyQ2FzZWAgdGhlIHJlc3VsdGluZyB2YWx1ZS5cbiAqL1xudmFyIHJ1bGVzID0gW1xuICBbJyMnLCAnaGFzaCddLCAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cbiAgWyc/JywgJ3F1ZXJ5J10sICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGJhY2suXG4gIFsnLycsICdwYXRobmFtZSddLCAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBiYWNrLlxuICBbJ0AnLCAnYXV0aCcsIDFdLCAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgZnJvbnQuXG4gIFtOYU4sICdob3N0JywgdW5kZWZpbmVkLCAxLCAxXSwgICAgICAgLy8gU2V0IGxlZnQgb3ZlciB2YWx1ZS5cbiAgWy86KFxcZCspJC8sICdwb3J0JywgdW5kZWZpbmVkLCAxXSwgICAgLy8gUmVnRXhwIHRoZSBiYWNrLlxuICBbTmFOLCAnaG9zdG5hbWUnLCB1bmRlZmluZWQsIDEsIDFdICAgIC8vIFNldCBsZWZ0IG92ZXIuXG5dO1xuXG4vKipcbiAqIEB0eXBlZGVmIFByb3RvY29sRXh0cmFjdFxuICogQHR5cGUgT2JqZWN0XG4gKiBAcHJvcGVydHkge1N0cmluZ30gcHJvdG9jb2wgUHJvdG9jb2wgbWF0Y2hlZCBpbiB0aGUgVVJMLCBpbiBsb3dlcmNhc2UuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IHNsYXNoZXMgYHRydWVgIGlmIHByb3RvY29sIGlzIGZvbGxvd2VkIGJ5IFwiLy9cIiwgZWxzZSBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtTdHJpbmd9IHJlc3QgUmVzdCBvZiB0aGUgVVJMIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sLlxuICovXG5cbi8qKlxuICogRXh0cmFjdCBwcm90b2NvbCBpbmZvcm1hdGlvbiBmcm9tIGEgVVJMIHdpdGgvd2l0aG91dCBkb3VibGUgc2xhc2ggKFwiLy9cIikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFkZHJlc3MgVVJMIHdlIHdhbnQgdG8gZXh0cmFjdCBmcm9tLlxuICogQHJldHVybiB7UHJvdG9jb2xFeHRyYWN0fSBFeHRyYWN0ZWQgaW5mb3JtYXRpb24uXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MpIHtcbiAgdmFyIG1hdGNoID0gcHJvdG9jb2xyZS5leGVjKGFkZHJlc3MpO1xuXG4gIHJldHVybiB7XG4gICAgcHJvdG9jb2w6IG1hdGNoWzFdID8gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSA6ICcnLFxuICAgIHNsYXNoZXM6ICEhbWF0Y2hbMl0sXG4gICAgcmVzdDogbWF0Y2hbM11cbiAgfTtcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGEgcmVsYXRpdmUgVVJMIHBhdGhuYW1lIGFnYWluc3QgYSBiYXNlIFVSTCBwYXRobmFtZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmVsYXRpdmUgUGF0aG5hbWUgb2YgdGhlIHJlbGF0aXZlIFVSTC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlIFBhdGhuYW1lIG9mIHRoZSBiYXNlIFVSTC5cbiAqIEByZXR1cm4ge1N0cmluZ30gUmVzb2x2ZWQgcGF0aG5hbWUuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZShyZWxhdGl2ZSwgYmFzZSkge1xuICB2YXIgcGF0aCA9IChiYXNlIHx8ICcvJykuc3BsaXQoJy8nKS5zbGljZSgwLCAtMSkuY29uY2F0KHJlbGF0aXZlLnNwbGl0KCcvJykpXG4gICAgLCBpID0gcGF0aC5sZW5ndGhcbiAgICAsIGxhc3QgPSBwYXRoW2kgLSAxXVxuICAgICwgdW5zaGlmdCA9IGZhbHNlXG4gICAgLCB1cCA9IDA7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChwYXRoW2ldID09PSAnLicpIHtcbiAgICAgIHBhdGguc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAocGF0aFtpXSA9PT0gJy4uJykge1xuICAgICAgcGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIGlmIChpID09PSAwKSB1bnNoaWZ0ID0gdHJ1ZTtcbiAgICAgIHBhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICBpZiAodW5zaGlmdCkgcGF0aC51bnNoaWZ0KCcnKTtcbiAgaWYgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSBwYXRoLnB1c2goJycpO1xuXG4gIHJldHVybiBwYXRoLmpvaW4oJy8nKTtcbn1cblxuLyoqXG4gKiBUaGUgYWN0dWFsIFVSTCBpbnN0YW5jZS4gSW5zdGVhZCBvZiByZXR1cm5pbmcgYW4gb2JqZWN0IHdlJ3ZlIG9wdGVkLWluIHRvXG4gKiBjcmVhdGUgYW4gYWN0dWFsIGNvbnN0cnVjdG9yIGFzIGl0J3MgbXVjaCBtb3JlIG1lbW9yeSBlZmZpY2llbnQgYW5kXG4gKiBmYXN0ZXIgYW5kIGl0IHBsZWFzZXMgbXkgT0NELlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtTdHJpbmd9IGFkZHJlc3MgVVJMIHdlIHdhbnQgdG8gcGFyc2UuXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGxvY2F0aW9uIExvY2F0aW9uIGRlZmF1bHRzIGZvciByZWxhdGl2ZSBwYXRocy5cbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gcGFyc2VyIFBhcnNlciBmb3IgdGhlIHF1ZXJ5IHN0cmluZy5cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIFVSTChhZGRyZXNzLCBsb2NhdGlvbiwgcGFyc2VyKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVUkwpKSB7XG4gICAgcmV0dXJuIG5ldyBVUkwoYWRkcmVzcywgbG9jYXRpb24sIHBhcnNlcik7XG4gIH1cblxuICB2YXIgcmVsYXRpdmUsIGV4dHJhY3RlZCwgcGFyc2UsIGluc3RydWN0aW9uLCBpbmRleCwga2V5XG4gICAgLCBpbnN0cnVjdGlvbnMgPSBydWxlcy5zbGljZSgpXG4gICAgLCB0eXBlID0gdHlwZW9mIGxvY2F0aW9uXG4gICAgLCB1cmwgPSB0aGlzXG4gICAgLCBpID0gMDtcblxuICAvL1xuICAvLyBUaGUgZm9sbG93aW5nIGlmIHN0YXRlbWVudHMgYWxsb3dzIHRoaXMgbW9kdWxlIHR3byBoYXZlIGNvbXBhdGliaWxpdHkgd2l0aFxuICAvLyAyIGRpZmZlcmVudCBBUEk6XG4gIC8vXG4gIC8vIDEuIE5vZGUuanMncyBgdXJsLnBhcnNlYCBhcGkgd2hpY2ggYWNjZXB0cyBhIFVSTCwgYm9vbGVhbiBhcyBhcmd1bWVudHNcbiAgLy8gICAgd2hlcmUgdGhlIGJvb2xlYW4gaW5kaWNhdGVzIHRoYXQgdGhlIHF1ZXJ5IHN0cmluZyBzaG91bGQgYWxzbyBiZSBwYXJzZWQuXG4gIC8vXG4gIC8vIDIuIFRoZSBgVVJMYCBpbnRlcmZhY2Ugb2YgdGhlIGJyb3dzZXIgd2hpY2ggYWNjZXB0cyBhIFVSTCwgb2JqZWN0IGFzXG4gIC8vICAgIGFyZ3VtZW50cy4gVGhlIHN1cHBsaWVkIG9iamVjdCB3aWxsIGJlIHVzZWQgYXMgZGVmYXVsdCB2YWx1ZXMgLyBmYWxsLWJhY2tcbiAgLy8gICAgZm9yIHJlbGF0aXZlIHBhdGhzLlxuICAvL1xuICBpZiAoJ29iamVjdCcgIT09IHR5cGUgJiYgJ3N0cmluZycgIT09IHR5cGUpIHtcbiAgICBwYXJzZXIgPSBsb2NhdGlvbjtcbiAgICBsb2NhdGlvbiA9IG51bGw7XG4gIH1cblxuICBpZiAocGFyc2VyICYmICdmdW5jdGlvbicgIT09IHR5cGVvZiBwYXJzZXIpIHBhcnNlciA9IHFzLnBhcnNlO1xuXG4gIGxvY2F0aW9uID0gbG9sY2F0aW9uKGxvY2F0aW9uKTtcblxuICAvL1xuICAvLyBFeHRyYWN0IHByb3RvY29sIGluZm9ybWF0aW9uIGJlZm9yZSBydW5uaW5nIHRoZSBpbnN0cnVjdGlvbnMuXG4gIC8vXG4gIGV4dHJhY3RlZCA9IGV4dHJhY3RQcm90b2NvbChhZGRyZXNzIHx8ICcnKTtcbiAgcmVsYXRpdmUgPSAhZXh0cmFjdGVkLnByb3RvY29sICYmICFleHRyYWN0ZWQuc2xhc2hlcztcbiAgdXJsLnNsYXNoZXMgPSBleHRyYWN0ZWQuc2xhc2hlcyB8fCByZWxhdGl2ZSAmJiBsb2NhdGlvbi5zbGFzaGVzO1xuICB1cmwucHJvdG9jb2wgPSBleHRyYWN0ZWQucHJvdG9jb2wgfHwgbG9jYXRpb24ucHJvdG9jb2wgfHwgJyc7XG4gIGFkZHJlc3MgPSBleHRyYWN0ZWQucmVzdDtcblxuICAvL1xuICAvLyBXaGVuIHRoZSBhdXRob3JpdHkgY29tcG9uZW50IGlzIGFic2VudCB0aGUgVVJMIHN0YXJ0cyB3aXRoIGEgcGF0aFxuICAvLyBjb21wb25lbnQuXG4gIC8vXG4gIGlmICghZXh0cmFjdGVkLnNsYXNoZXMpIGluc3RydWN0aW9uc1syXSA9IFsvKC4qKS8sICdwYXRobmFtZSddO1xuXG4gIGZvciAoOyBpIDwgaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbnNbaV07XG4gICAgcGFyc2UgPSBpbnN0cnVjdGlvblswXTtcbiAgICBrZXkgPSBpbnN0cnVjdGlvblsxXTtcblxuICAgIGlmIChwYXJzZSAhPT0gcGFyc2UpIHtcbiAgICAgIHVybFtrZXldID0gYWRkcmVzcztcbiAgICB9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgcGFyc2UpIHtcbiAgICAgIGlmICh+KGluZGV4ID0gYWRkcmVzcy5pbmRleE9mKHBhcnNlKSkpIHtcbiAgICAgICAgaWYgKCdudW1iZXInID09PSB0eXBlb2YgaW5zdHJ1Y3Rpb25bMl0pIHtcbiAgICAgICAgICB1cmxba2V5XSA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKGluZGV4ICsgaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVybFtrZXldID0gYWRkcmVzcy5zbGljZShpbmRleCk7XG4gICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoaW5kZXggPSBwYXJzZS5leGVjKGFkZHJlc3MpKSkge1xuICAgICAgdXJsW2tleV0gPSBpbmRleFsxXTtcbiAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKDAsIGluZGV4LmluZGV4KTtcbiAgICB9XG5cbiAgICB1cmxba2V5XSA9IHVybFtrZXldIHx8IChcbiAgICAgIHJlbGF0aXZlICYmIGluc3RydWN0aW9uWzNdID8gbG9jYXRpb25ba2V5XSB8fCAnJyA6ICcnXG4gICAgKTtcblxuICAgIC8vXG4gICAgLy8gSG9zdG5hbWUsIGhvc3QgYW5kIHByb3RvY29sIHNob3VsZCBiZSBsb3dlcmNhc2VkIHNvIHRoZXkgY2FuIGJlIHVzZWQgdG9cbiAgICAvLyBjcmVhdGUgYSBwcm9wZXIgYG9yaWdpbmAuXG4gICAgLy9cbiAgICBpZiAoaW5zdHJ1Y3Rpb25bNF0pIHVybFtrZXldID0gdXJsW2tleV0udG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIC8vXG4gIC8vIEFsc28gcGFyc2UgdGhlIHN1cHBsaWVkIHF1ZXJ5IHN0cmluZyBpbiB0byBhbiBvYmplY3QuIElmIHdlJ3JlIHN1cHBsaWVkXG4gIC8vIHdpdGggYSBjdXN0b20gcGFyc2VyIGFzIGZ1bmN0aW9uIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgYnVpbGQtaW5cbiAgLy8gcGFyc2VyLlxuICAvL1xuICBpZiAocGFyc2VyKSB1cmwucXVlcnkgPSBwYXJzZXIodXJsLnF1ZXJ5KTtcblxuICAvL1xuICAvLyBJZiB0aGUgVVJMIGlzIHJlbGF0aXZlLCByZXNvbHZlIHRoZSBwYXRobmFtZSBhZ2FpbnN0IHRoZSBiYXNlIFVSTC5cbiAgLy9cbiAgaWYgKFxuICAgICAgcmVsYXRpdmVcbiAgICAmJiBsb2NhdGlvbi5zbGFzaGVzXG4gICAgJiYgdXJsLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nXG4gICAgJiYgKHVybC5wYXRobmFtZSAhPT0gJycgfHwgbG9jYXRpb24ucGF0aG5hbWUgIT09ICcnKVxuICApIHtcbiAgICB1cmwucGF0aG5hbWUgPSByZXNvbHZlKHVybC5wYXRobmFtZSwgbG9jYXRpb24ucGF0aG5hbWUpO1xuICB9XG5cbiAgLy9cbiAgLy8gV2Ugc2hvdWxkIG5vdCBhZGQgcG9ydCBudW1iZXJzIGlmIHRoZXkgYXJlIGFscmVhZHkgdGhlIGRlZmF1bHQgcG9ydCBudW1iZXJcbiAgLy8gZm9yIGEgZ2l2ZW4gcHJvdG9jb2wuIEFzIHRoZSBob3N0IGFsc28gY29udGFpbnMgdGhlIHBvcnQgbnVtYmVyIHdlJ3JlIGdvaW5nXG4gIC8vIG92ZXJyaWRlIGl0IHdpdGggdGhlIGhvc3RuYW1lIHdoaWNoIGNvbnRhaW5zIG5vIHBvcnQgbnVtYmVyLlxuICAvL1xuICBpZiAoIXJlcXVpcmVkKHVybC5wb3J0LCB1cmwucHJvdG9jb2wpKSB7XG4gICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWU7XG4gICAgdXJsLnBvcnQgPSAnJztcbiAgfVxuXG4gIC8vXG4gIC8vIFBhcnNlIGRvd24gdGhlIGBhdXRoYCBmb3IgdGhlIHVzZXJuYW1lIGFuZCBwYXNzd29yZC5cbiAgLy9cbiAgdXJsLnVzZXJuYW1lID0gdXJsLnBhc3N3b3JkID0gJyc7XG4gIGlmICh1cmwuYXV0aCkge1xuICAgIGluc3RydWN0aW9uID0gdXJsLmF1dGguc3BsaXQoJzonKTtcbiAgICB1cmwudXNlcm5hbWUgPSBpbnN0cnVjdGlvblswXSB8fCAnJztcbiAgICB1cmwucGFzc3dvcmQgPSBpbnN0cnVjdGlvblsxXSB8fCAnJztcbiAgfVxuXG4gIHVybC5vcmlnaW4gPSB1cmwucHJvdG9jb2wgJiYgdXJsLmhvc3QgJiYgdXJsLnByb3RvY29sICE9PSAnZmlsZTonXG4gICAgPyB1cmwucHJvdG9jb2wgKycvLycrIHVybC5ob3N0XG4gICAgOiAnbnVsbCc7XG5cbiAgLy9cbiAgLy8gVGhlIGhyZWYgaXMganVzdCB0aGUgY29tcGlsZWQgcmVzdWx0LlxuICAvL1xuICB1cmwuaHJlZiA9IHVybC50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgY29udmVuaWVuY2UgbWV0aG9kIGZvciBjaGFuZ2luZyBwcm9wZXJ0aWVzIGluIHRoZSBVUkwgaW5zdGFuY2UgdG9cbiAqIGluc3VyZSB0aGF0IHRoZXkgYWxsIHByb3BhZ2F0ZSBjb3JyZWN0bHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhcnQgICAgICAgICAgUHJvcGVydHkgd2UgbmVlZCB0byBhZGp1c3QuXG4gKiBAcGFyYW0ge01peGVkfSB2YWx1ZSAgICAgICAgICBUaGUgbmV3bHkgYXNzaWduZWQgdmFsdWUuXG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IGZuICBXaGVuIHNldHRpbmcgdGhlIHF1ZXJ5LCBpdCB3aWxsIGJlIHRoZSBmdW5jdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCB0byBwYXJzZSB0aGUgcXVlcnkuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaGVuIHNldHRpbmcgdGhlIHByb3RvY29sLCBkb3VibGUgc2xhc2ggd2lsbCBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZCBmcm9tIHRoZSBmaW5hbCB1cmwgaWYgaXQgaXMgdHJ1ZS5cbiAqIEByZXR1cm5zIHtVUkx9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBzZXQocGFydCwgdmFsdWUsIGZuKSB7XG4gIHZhciB1cmwgPSB0aGlzO1xuXG4gIHN3aXRjaCAocGFydCkge1xuICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHZhbHVlICYmIHZhbHVlLmxlbmd0aCkge1xuICAgICAgICB2YWx1ZSA9IChmbiB8fCBxcy5wYXJzZSkodmFsdWUpO1xuICAgICAgfVxuXG4gICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncG9ydCc6XG4gICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblxuICAgICAgaWYgKCFyZXF1aXJlZCh2YWx1ZSwgdXJsLnByb3RvY29sKSkge1xuICAgICAgICB1cmwuaG9zdCA9IHVybC5ob3N0bmFtZTtcbiAgICAgICAgdXJsW3BhcnRdID0gJyc7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lICsnOicrIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2hvc3RuYW1lJzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAodXJsLnBvcnQpIHZhbHVlICs9ICc6JysgdXJsLnBvcnQ7XG4gICAgICB1cmwuaG9zdCA9IHZhbHVlO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdob3N0JzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAoLzpcXGQrJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgnOicpO1xuICAgICAgICB1cmwucG9ydCA9IHZhbHVlLnBvcCgpO1xuICAgICAgICB1cmwuaG9zdG5hbWUgPSB2YWx1ZS5qb2luKCc6Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwuaG9zdG5hbWUgPSB2YWx1ZTtcbiAgICAgICAgdXJsLnBvcnQgPSAnJztcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdwcm90b2NvbCc6XG4gICAgICB1cmwucHJvdG9jb2wgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdXJsLnNsYXNoZXMgPSAhZm47XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3BhdGhuYW1lJzpcbiAgICAgIHVybC5wYXRobmFtZSA9IHZhbHVlLmxlbmd0aCAmJiB2YWx1ZS5jaGFyQXQoMCkgIT09ICcvJyA/ICcvJyArIHZhbHVlIDogdmFsdWU7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpbnMgPSBydWxlc1tpXTtcblxuICAgIGlmIChpbnNbNF0pIHVybFtpbnNbMV1dID0gdXJsW2luc1sxXV0udG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIHVybC5vcmlnaW4gPSB1cmwucHJvdG9jb2wgJiYgdXJsLmhvc3QgJiYgdXJsLnByb3RvY29sICE9PSAnZmlsZTonXG4gICAgPyB1cmwucHJvdG9jb2wgKycvLycrIHVybC5ob3N0XG4gICAgOiAnbnVsbCc7XG5cbiAgdXJsLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcblxuICByZXR1cm4gdXJsO1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIHByb3BlcnRpZXMgYmFjayBpbiB0byBhIHZhbGlkIGFuZCBmdWxsIFVSTCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5naWZ5IE9wdGlvbmFsIHF1ZXJ5IHN0cmluZ2lmeSBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiB0b1N0cmluZyhzdHJpbmdpZnkpIHtcbiAgaWYgKCFzdHJpbmdpZnkgfHwgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHN0cmluZ2lmeSkgc3RyaW5naWZ5ID0gcXMuc3RyaW5naWZ5O1xuXG4gIHZhciBxdWVyeVxuICAgICwgdXJsID0gdGhpc1xuICAgICwgcHJvdG9jb2wgPSB1cmwucHJvdG9jb2w7XG5cbiAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLmNoYXJBdChwcm90b2NvbC5sZW5ndGggLSAxKSAhPT0gJzonKSBwcm90b2NvbCArPSAnOic7XG5cbiAgdmFyIHJlc3VsdCA9IHByb3RvY29sICsgKHVybC5zbGFzaGVzID8gJy8vJyA6ICcnKTtcblxuICBpZiAodXJsLnVzZXJuYW1lKSB7XG4gICAgcmVzdWx0ICs9IHVybC51c2VybmFtZTtcbiAgICBpZiAodXJsLnBhc3N3b3JkKSByZXN1bHQgKz0gJzonKyB1cmwucGFzc3dvcmQ7XG4gICAgcmVzdWx0ICs9ICdAJztcbiAgfVxuXG4gIHJlc3VsdCArPSB1cmwuaG9zdCArIHVybC5wYXRobmFtZTtcblxuICBxdWVyeSA9ICdvYmplY3QnID09PSB0eXBlb2YgdXJsLnF1ZXJ5ID8gc3RyaW5naWZ5KHVybC5xdWVyeSkgOiB1cmwucXVlcnk7XG4gIGlmIChxdWVyeSkgcmVzdWx0ICs9ICc/JyAhPT0gcXVlcnkuY2hhckF0KDApID8gJz8nKyBxdWVyeSA6IHF1ZXJ5O1xuXG4gIGlmICh1cmwuaGFzaCkgcmVzdWx0ICs9IHVybC5oYXNoO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblVSTC5wcm90b3R5cGUgPSB7IHNldDogc2V0LCB0b1N0cmluZzogdG9TdHJpbmcgfTtcblxuLy9cbi8vIEV4cG9zZSB0aGUgVVJMIHBhcnNlciBhbmQgc29tZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdGhhdCBtaWdodCBiZSB1c2VmdWwgZm9yXG4vLyBvdGhlcnMgb3IgdGVzdGluZy5cbi8vXG5VUkwuZXh0cmFjdFByb3RvY29sID0gZXh0cmFjdFByb3RvY29sO1xuVVJMLmxvY2F0aW9uID0gbG9sY2F0aW9uO1xuVVJMLnFzID0gcXM7XG5cbm1vZHVsZS5leHBvcnRzID0gVVJMO1xuXG5cbi8qKiovIH0pLFxuLyogMiAqLyxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF91cFRvID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF91cFRvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VwVG8pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIENyZWF0ZSBhIGZvbnQgYXdlc29tZSBpY29uIG5vZGUuXG4gKlxuICogQHBhcmFtIGljb25cbiAqIEBwYXJhbSBuYW1lXG4gKlxuICogQHJldHVybnMgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGljb25Ob2RlKGljb24sIG5hbWUpIHtcbiAgcmV0dXJuICc8aSBjbGFzcz1cImZhIGZhLWZ3IGZhLScgKyBpY29uICsgJ1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGRhdGEtaG92ZXI9XCJ0b29sdGlwXCIgZGF0YS10b29sdGlwLWRlbGF5PVwiMzUwXCIgZGF0YS10b29sdGlwLWNvbnRlbnQ9XCInICsgbmFtZSArICdcIj48L2k+Jztcbn1cblxuLyoqXG4gKiBBZGQgYnV0dG9ucyBpbiB0aGUgcmlnaHQgb2Ygc2VhcmNoIGJhci5cbiAqXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIG5vZGUuY2xhc3NOYW1lID0gJ2N1c3RvbS1idXR0b24nO1xuICBub2RlLmlubmVySFRNTCA9ICdcXG4nICsgaWNvbk5vZGUoJ2ZpcmUnLCAn54ax6ZaA57KJ5bCIJykgKyAnXFxuJyArIGljb25Ob2RlKCdiYXItY2hhcnQnLCAn5YCL5Lq657Wx6KiIJykgKyAnXFxuJyArIGljb25Ob2RlKCdoaXN0b3J5JywgJ+att+WPsuWbnumhpycpICsgJ1xcbicgKyBpY29uTm9kZSgnY29nJywgJ+ioreWumicpO1xuXG4gICgwLCBfdXBUbzIuZGVmYXVsdCkoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmN1c3RvbS1zZWFyY2gtYmFyJyksICdkaXYnKS5hcHBlbmQobm9kZSk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1c3RvbS1idXR0b24gaScpLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tbW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXN0b20tbW9kYWwtdGl0bGUnKS5pbm5lclRleHQgPSBlLnRhcmdldC5kYXRhc2V0LnRvb2x0aXBDb250ZW50O1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vKipcbiAqIEFkZCBtb2RhbC5cbiAqXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIG5vZGUuY2xhc3NOYW1lID0gJ2N1c3RvbS1tb2RhbCc7XG4gIG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgbm9kZS5pbm5lckhUTUwgPSAnXFxuPGRpdiBjbGFzcz1cImJhY2tncm91bmRcIj48L2Rpdj5cXG48ZGl2IGNsYXNzPVwiYm94XCI+XFxuICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XFxuICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tbGVmdDogMXJlbTtcIj5cXG4gICAgICA8YiBpZD1cImN1c3RvbS1tb2RhbC10aXRsZVwiPjwvYj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJjbG9zZS1idXR0b25cIj5cXG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWxnIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj48L2Rpdj5cXG48L2Rpdj4nO1xuXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kKG5vZGUpO1xuXG4gIHZhciBjbG9zZUV2ZW50ID0gZnVuY3Rpb24gY2xvc2VFdmVudCgpIHtcbiAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH07XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1c3RvbS1tb2RhbCAuYmFja2dyb3VuZCcpLm9uY2xpY2sgPSBjbG9zZUV2ZW50O1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLW1vZGFsIC5jbG9zZS1idXR0b24gaScpLm9uY2xpY2sgPSBjbG9zZUV2ZW50O1xufTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogQWRkIGNsYXNzIHRvIGZhY2Vib29rIG5hdmJhci5cbiAqXG4gKiBAcGFyYW0gZG9tXG4gKlxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb20pIHtcbiAgZG9tLmNsYXNzTmFtZSArPSAnIGN1c3RvbS1uYXZiYXInO1xufTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogQWRkIHNlYXJjaCBiYXIgaW4gdGhlIHJpZ2h0IG9mIGZhY2Vib29rIHNlYXJjaCBiYXIuXG4gKlxuICogQHBhcmFtIGRvbVxuICpcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZG9tKSB7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgbm9kZS5jbGFzc05hbWUgPSAnY3VzdG9tLXNlYXJjaC1iYXInO1xuICBub2RlLmlubmVySFRNTCA9ICdcXG48Zm9ybT5cXG4gIDxkaXY+XFxuICAgIDxpbnB1dCBpZD1cImN1c3RvbS1zZWFyY2gtaW5wdXRcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIERCXCI+XFxuICA8L2Rpdj5cXG48L2Zvcm0+JztcblxuICBkb20uYXBwZW5kKG5vZGUpO1xufTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFNpbXBsZSBxdWVyeSBzdHJpbmcgcGFyc2VyLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBxdWVyeSBUaGUgcXVlcnkgc3RyaW5nIHRoYXQgbmVlZHMgdG8gYmUgcGFyc2VkLlxuICogQHJldHVybnMge09iamVjdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5KSB7XG4gIHZhciBwYXJzZXIgPSAvKFtePT8mXSspPT8oW14mXSopL2dcbiAgICAsIHJlc3VsdCA9IHt9XG4gICAgLCBwYXJ0O1xuXG4gIC8vXG4gIC8vIExpdHRsZSBuaWZ0eSBwYXJzaW5nIGhhY2ssIGxldmVyYWdlIHRoZSBmYWN0IHRoYXQgUmVnRXhwLmV4ZWMgaW5jcmVtZW50c1xuICAvLyB0aGUgbGFzdEluZGV4IHByb3BlcnR5IHNvIHdlIGNhbiBjb250aW51ZSBleGVjdXRpbmcgdGhpcyBsb29wIHVudGlsIHdlJ3ZlXG4gIC8vIHBhcnNlZCBhbGwgcmVzdWx0cy5cbiAgLy9cbiAgZm9yICg7XG4gICAgcGFydCA9IHBhcnNlci5leGVjKHF1ZXJ5KTtcbiAgICByZXN1bHRbZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0WzJdKVxuICApO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGEgcXVlcnkgc3RyaW5nIHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0aGF0IHNob3VsZCBiZSB0cmFuc2Zvcm1lZC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXggT3B0aW9uYWwgcHJlZml4LlxuICogQHJldHVybnMge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5naWZ5KG9iaiwgcHJlZml4KSB7XG4gIHByZWZpeCA9IHByZWZpeCB8fCAnJztcblxuICB2YXIgcGFpcnMgPSBbXTtcblxuICAvL1xuICAvLyBPcHRpb25hbGx5IHByZWZpeCB3aXRoIGEgJz8nIGlmIG5lZWRlZFxuICAvL1xuICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBwcmVmaXgpIHByZWZpeCA9ICc/JztcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhcy5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgcGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArJz0nKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2tleV0pKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFpcnMubGVuZ3RoID8gcHJlZml4ICsgcGFpcnMuam9pbignJicpIDogJyc7XG59XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5leHBvcnRzLnN0cmluZ2lmeSA9IHF1ZXJ5c3RyaW5naWZ5O1xuZXhwb3J0cy5wYXJzZSA9IHF1ZXJ5c3RyaW5nO1xuXG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vKipcbiAqIENoZWNrIGlmIHdlJ3JlIHJlcXVpcmVkIHRvIGFkZCBhIHBvcnQgbnVtYmVyLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkZWZhdWx0LXBvcnRcbiAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gcG9ydCBQb3J0IG51bWJlciB3ZSBuZWVkIHRvIGNoZWNrXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2wgUHJvdG9jb2wgd2UgbmVlZCB0byBjaGVjayBhZ2FpbnN0LlxuICogQHJldHVybnMge0Jvb2xlYW59IElzIGl0IGEgZGVmYXVsdCBwb3J0IGZvciB0aGUgZ2l2ZW4gcHJvdG9jb2xcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcXVpcmVkKHBvcnQsIHByb3RvY29sKSB7XG4gIHByb3RvY29sID0gcHJvdG9jb2wuc3BsaXQoJzonKVswXTtcbiAgcG9ydCA9ICtwb3J0O1xuXG4gIGlmICghcG9ydCkgcmV0dXJuIGZhbHNlO1xuXG4gIHN3aXRjaCAocHJvdG9jb2wpIHtcbiAgICBjYXNlICdodHRwJzpcbiAgICBjYXNlICd3cyc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDgwO1xuXG4gICAgY2FzZSAnaHR0cHMnOlxuICAgIGNhc2UgJ3dzcyc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDQ0MztcblxuICAgIGNhc2UgJ2Z0cCc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDIxO1xuXG4gICAgY2FzZSAnZ29waGVyJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gNzA7XG5cbiAgICBjYXNlICdmaWxlJzpcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gcG9ydCAhPT0gMDtcbn07XG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgc2xhc2hlcyA9IC9eW0EtWmEtel1bQS1aYS16MC05Ky0uXSo6XFwvXFwvLztcblxuLyoqXG4gKiBUaGVzZSBwcm9wZXJ0aWVzIHNob3VsZCBub3QgYmUgY29waWVkIG9yIGluaGVyaXRlZCBmcm9tLiBUaGlzIGlzIG9ubHkgbmVlZGVkXG4gKiBmb3IgYWxsIG5vbiBibG9iIFVSTCdzIGFzIGEgYmxvYiBVUkwgZG9lcyBub3QgaW5jbHVkZSBhIGhhc2gsIG9ubHkgdGhlXG4gKiBvcmlnaW4uXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBpZ25vcmUgPSB7IGhhc2g6IDEsIHF1ZXJ5OiAxIH1cbiAgLCBVUkw7XG5cbi8qKlxuICogVGhlIGxvY2F0aW9uIG9iamVjdCBkaWZmZXJzIHdoZW4geW91ciBjb2RlIGlzIGxvYWRlZCB0aHJvdWdoIGEgbm9ybWFsIHBhZ2UsXG4gKiBXb3JrZXIgb3IgdGhyb3VnaCBhIHdvcmtlciB1c2luZyBhIGJsb2IuIEFuZCB3aXRoIHRoZSBibG9iYmxlIGJlZ2lucyB0aGVcbiAqIHRyb3VibGUgYXMgdGhlIGxvY2F0aW9uIG9iamVjdCB3aWxsIGNvbnRhaW4gdGhlIFVSTCBvZiB0aGUgYmxvYiwgbm90IHRoZVxuICogbG9jYXRpb24gb2YgdGhlIHBhZ2Ugd2hlcmUgb3VyIGNvZGUgaXMgbG9hZGVkIGluLiBUaGUgYWN0dWFsIG9yaWdpbiBpc1xuICogZW5jb2RlZCBpbiB0aGUgYHBhdGhuYW1lYCBzbyB3ZSBjYW4gdGhhbmtmdWxseSBnZW5lcmF0ZSBhIGdvb2QgXCJkZWZhdWx0XCJcbiAqIGxvY2F0aW9uIGZyb20gaXQgc28gd2UgY2FuIGdlbmVyYXRlIHByb3BlciByZWxhdGl2ZSBVUkwncyBhZ2Fpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGxvYyBPcHRpb25hbCBkZWZhdWx0IGxvY2F0aW9uIG9iamVjdC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGxvbGNhdGlvbiBvYmplY3QuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxvbGNhdGlvbihsb2MpIHtcbiAgbG9jID0gbG9jIHx8IGdsb2JhbC5sb2NhdGlvbiB8fCB7fTtcbiAgVVJMID0gVVJMIHx8IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbiAgdmFyIGZpbmFsZGVzdGluYXRpb24gPSB7fVxuICAgICwgdHlwZSA9IHR5cGVvZiBsb2NcbiAgICAsIGtleTtcblxuICBpZiAoJ2Jsb2I6JyA9PT0gbG9jLnByb3RvY29sKSB7XG4gICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwodW5lc2NhcGUobG9jLnBhdGhuYW1lKSwge30pO1xuICB9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlKSB7XG4gICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwobG9jLCB7fSk7XG4gICAgZm9yIChrZXkgaW4gaWdub3JlKSBkZWxldGUgZmluYWxkZXN0aW5hdGlvbltrZXldO1xuICB9IGVsc2UgaWYgKCdvYmplY3QnID09PSB0eXBlKSB7XG4gICAgZm9yIChrZXkgaW4gbG9jKSB7XG4gICAgICBpZiAoa2V5IGluIGlnbm9yZSkgY29udGludWU7XG4gICAgICBmaW5hbGRlc3RpbmF0aW9uW2tleV0gPSBsb2Nba2V5XTtcbiAgICB9XG5cbiAgICBpZiAoZmluYWxkZXN0aW5hdGlvbi5zbGFzaGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbmFsZGVzdGluYXRpb24uc2xhc2hlcyA9IHNsYXNoZXMudGVzdChsb2MuaHJlZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZpbmFsZGVzdGluYXRpb247XG59O1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMCkpKVxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfdXBUbyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfdXBUbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cFRvKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZG9jdW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICBpZiAoJ2ludGVyYWN0aXZlJyA9PT0gZG9jdW1lbnQucmVhZHlTdGF0ZSkge1xuICAgIHZhciBkb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W3JvbGU9XCJzZWFyY2hcIl0nKTtcblxuICAgICAgaWYgKCFkb20pIHtcbiAgICAgICAgZG9tID0gKDAsIF91cFRvMi5kZWZhdWx0KShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW3JvbGU9XCJzZWFyY2hcIl0nKSwgJ2RpdicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKDAsIF91cFRvMi5kZWZhdWx0KShkb20sICdkaXYnKTtcbiAgICB9KCk7XG5cbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKGRvbSk7XG4gICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2KShkb20pO1xuICAgIF9fd2VicGFja19yZXF1aXJlX18oMykoKTtcbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpKCk7XG5cbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKSgpO1xuICAgIF9fd2VicGFja19yZXF1aXJlX18oMTQpKCk7XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogMTIgKi8sXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vKipcbiAqIExpc3RlbiBmb3IgZmFjZWJvb2sgc2VhcmNoLlxuICpcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xudmFyIHNlYXJjaCA9IGZ1bmN0aW9uIHNlYXJjaCgpIHtcbiAgdmFyIGZiU2VhcmNoSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cInFcIl0nKTtcblxuICBpZiAoMiA+IGZiU2VhcmNoSW5wdXRzLmxlbmd0aCAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3EnKSkge1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KHNlYXJjaCwgMTAwMCk7XG4gIH0gZWxzZSB7XG4gICAgZmJTZWFyY2hJbnB1dHMuaXRlbShmYlNlYXJjaElucHV0cy5sZW5ndGggLSAxKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VzdG9tLXNlYXJjaC1pbnB1dCcpLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgfSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc2VhcmNoO1xuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfdXJsUGFyc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3VybFBhcnNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VybFBhcnNlKTtcblxudmFyIF91cFRvID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF91cFRvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VwVG8pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJldHJpZXZlRmJpZEZyb21VcmwgPSBmdW5jdGlvbiByZXRyaWV2ZUZiaWRGcm9tVXJsKHVybCkge1xuICAgIGlmICh1cmwuZW5kc1dpdGgoJzozJykgfHwgdXJsLmluY2x1ZGVzKCdzdG9yeV9mYmlkJykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAodXJsLmluY2x1ZGVzKCdwaG90by5waHAnKSkge1xuICAgICAgcmV0dXJuICgwLCBfdXJsUGFyc2UyLmRlZmF1bHQpKHVybCwgdHJ1ZSkucXVlcnkuZmJpZHNzcyB8fCBudWxsO1xuICAgIH1cblxuICAgIHZhciBxdWV1ZSA9IHVybC5zcGxpdCgnLycpO1xuXG4gICAgaWYgKHVybC5pbmNsdWRlcygncGhvdG9zJykgfHwgdXJsLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgIHF1ZXVlLnBvcCgpO1xuICAgIH1cblxuICAgIHJldHVybiBxdWV1ZS5wb3AoKTtcbiAgfTtcbiAgdmFyIGlzRmVlZEluU2NyZWVuID0gZnVuY3Rpb24gaXNGZWVkSW5TY3JlZW4oZmVlZCkge1xuICAgIHZhciByZWN0ID0gZmVlZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgc2NyZWVuID0ge1xuICAgICAgdG9wOiB3aW5kb3cuc2Nyb2xsWSxcbiAgICAgIGJvdHRvbTogd2luZG93LnNjcm9sbFkgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gICAgfTtcbiAgICB2YXIgZWwgPSB7XG4gICAgICB0b3A6IGZlZWQub2Zmc2V0VG9wICsgcmVjdC5oZWlnaHQgLyAzLFxuICAgICAgYm90dG9tOiBmZWVkLm9mZnNldFRvcCArIHJlY3QuaGVpZ2h0IC8gMyAqIDJcbiAgICB9O1xuXG4gICAgaWYgKGVsLnRvcCA+IHNjcmVlbi50b3AgJiYgZWwudG9wIDwgc2NyZWVuLmJvdHRvbSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChlbC5ib3R0b20gPiBzY3JlZW4udG9wICYmIGVsLmJvdHRvbSA8IHNjcmVlbi5ib3R0b20pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB2YXIgbGFzdFkgPSAwO1xuICB2YXIgZmVlZHMgPSBbXTtcblxuICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCcvJyAhPT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsYXN0WSA9IDA7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbaWRePVwiaHlwZXJmZWVkX3N0b3J5X2lkXCJdJykuZm9yRWFjaChmdW5jdGlvbiAoZmVlZCkge1xuICAgICAgdmFyIGlzU3BvbnNvcmVkID0gZmVlZC5xdWVyeVNlbGVjdG9yKCdhW2hyZWZePVwiaHR0cHM6Ly9sLmZhY2Vib29rLmNvbS9sLnBocFwiXScpO1xuXG4gICAgICBpZiAoaXNTcG9uc29yZWQpIHtcbiAgICAgICAgc3dpdGNoIChpc1Nwb25zb3JlZC5pbm5lclRleHQpIHtcbiAgICAgICAgICBjYXNlICdTcG9uc29yZWQnOlxuICAgICAgICAgIGNhc2UgJ+i0iuWKqSc6XG4gICAgICAgICAgY2FzZSAn5bqD5ZGKJzpcbiAgICAgICAgICAgIHJldHVybiBmZWVkLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBmZWVkVGltZSA9IGZlZWQucXVlcnlTZWxlY3RvcignYWJici50aW1lc3RhbXAubGl2ZXRpbWVzdGFtcCcpO1xuXG4gICAgICBpZiAoIWZlZWRUaW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGlzUHVibGljID0gKDAsIF91cFRvMi5kZWZhdWx0KShmZWVkVGltZSwgJ2RpdicpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRvb2x0aXAtY29udGVudF0nKTtcblxuICAgICAgaWYgKCFpc1B1YmxpYykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlzUHVibGljID0gaXNQdWJsaWMuZ2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtY29udGVudCcpO1xuXG4gICAgICBpZiAoaXNQdWJsaWMuaW5jbHVkZXMoJ1B1YmxpYycpIHx8IGlzUHVibGljLmluY2x1ZGVzKCflhazplosnKSkge1xuICAgICAgICB2YXIgZmJpZCA9IHJldHJpZXZlRmJpZEZyb21VcmwoKDAsIF91cFRvMi5kZWZhdWx0KShmZWVkVGltZSwgJ2EnKS5ocmVmKTtcblxuICAgICAgICBpZiAoZmJpZCAmJiAhZmVlZHMuaW5jbHVkZXMoZmJpZCkpIHtcbiAgICAgICAgICBmZWVkcy5wdXNoKGZiaWQpO1xuXG4gICAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgZmVlZHM6IGZlZWRzIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRmVlZEluU2NyZWVuKGZlZWQpKSB7XG4gICAgICAgICAgaWYgKDAgPiB3aW5kb3cuc2Nyb2xsWSAtIGxhc3RZKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYmFjaycsIGZiaWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmYmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxhc3RZID0gd2luZG93LnNjcm9sbFk7XG4gIH07XG59O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnRlbnQtc2NyaXB0cy5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1ZmExZGM1NWJhYjAzMWYwMWMwNCIsIi8qKlxuICogRmluZCBmaXJzdCBhbmNlc3RvciBvZiBlbCB3aXRoIHRhZ05hbWUgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZC5cbiAqXG4gKiBAcGFyYW0gZWxcbiAqIEBwYXJhbSB0YWdOYW1lXG4gKiBAcmV0dXJucyB7Kn1cbiAqXG4gKiBAcmVmZXJlbmNlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzY4NTcxMTZcbiAqL1xuZXhwb3J0IGRlZmF1bHQgKGVsLCB0YWdOYW1lKSA9PiB7XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKClcblxuICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkge1xuICAgIGVsID0gZWwucGFyZW50Tm9kZVxuXG4gICAgaWYgKGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0YWdOYW1lKSB7XG4gICAgICByZXR1cm4gZWxcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3V0aWxzL3VwLXRvLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVxdWlyZWQgPSByZXF1aXJlKCdyZXF1aXJlcy1wb3J0JylcbiAgLCBsb2xjYXRpb24gPSByZXF1aXJlKCcuL2xvbGNhdGlvbicpXG4gICwgcXMgPSByZXF1aXJlKCdxdWVyeXN0cmluZ2lmeScpXG4gICwgcHJvdG9jb2xyZSA9IC9eKFthLXpdW2EtejAtOS4rLV0qOik/KFxcL1xcLyk/KFtcXFNcXHNdKikvaTtcblxuLyoqXG4gKiBUaGVzZSBhcmUgdGhlIHBhcnNlIHJ1bGVzIGZvciB0aGUgVVJMIHBhcnNlciwgaXQgaW5mb3JtcyB0aGUgcGFyc2VyXG4gKiBhYm91dDpcbiAqXG4gKiAwLiBUaGUgY2hhciBpdCBOZWVkcyB0byBwYXJzZSwgaWYgaXQncyBhIHN0cmluZyBpdCBzaG91bGQgYmUgZG9uZSB1c2luZ1xuICogICAgaW5kZXhPZiwgUmVnRXhwIHVzaW5nIGV4ZWMgYW5kIE5hTiBtZWFucyBzZXQgYXMgY3VycmVudCB2YWx1ZS5cbiAqIDEuIFRoZSBwcm9wZXJ0eSB3ZSBzaG91bGQgc2V0IHdoZW4gcGFyc2luZyB0aGlzIHZhbHVlLlxuICogMi4gSW5kaWNhdGlvbiBpZiBpdCdzIGJhY2t3YXJkcyBvciBmb3J3YXJkIHBhcnNpbmcsIHdoZW4gc2V0IGFzIG51bWJlciBpdCdzXG4gKiAgICB0aGUgdmFsdWUgb2YgZXh0cmEgY2hhcnMgdGhhdCBzaG91bGQgYmUgc3BsaXQgb2ZmLlxuICogMy4gSW5oZXJpdCBmcm9tIGxvY2F0aW9uIGlmIG5vbiBleGlzdGluZyBpbiB0aGUgcGFyc2VyLlxuICogNC4gYHRvTG93ZXJDYXNlYCB0aGUgcmVzdWx0aW5nIHZhbHVlLlxuICovXG52YXIgcnVsZXMgPSBbXG4gIFsnIycsICdoYXNoJ10sICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBiYWNrLlxuICBbJz8nLCAncXVlcnknXSwgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cbiAgWycvJywgJ3BhdGhuYW1lJ10sICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGJhY2suXG4gIFsnQCcsICdhdXRoJywgMV0sICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBmcm9udC5cbiAgW05hTiwgJ2hvc3QnLCB1bmRlZmluZWQsIDEsIDFdLCAgICAgICAvLyBTZXQgbGVmdCBvdmVyIHZhbHVlLlxuICBbLzooXFxkKykkLywgJ3BvcnQnLCB1bmRlZmluZWQsIDFdLCAgICAvLyBSZWdFeHAgdGhlIGJhY2suXG4gIFtOYU4sICdob3N0bmFtZScsIHVuZGVmaW5lZCwgMSwgMV0gICAgLy8gU2V0IGxlZnQgb3Zlci5cbl07XG5cbi8qKlxuICogQHR5cGVkZWYgUHJvdG9jb2xFeHRyYWN0XG4gKiBAdHlwZSBPYmplY3RcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBwcm90b2NvbCBQcm90b2NvbCBtYXRjaGVkIGluIHRoZSBVUkwsIGluIGxvd2VyY2FzZS5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gc2xhc2hlcyBgdHJ1ZWAgaWYgcHJvdG9jb2wgaXMgZm9sbG93ZWQgYnkgXCIvL1wiLCBlbHNlIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge1N0cmluZ30gcmVzdCBSZXN0IG9mIHRoZSBVUkwgdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wuXG4gKi9cblxuLyoqXG4gKiBFeHRyYWN0IHByb3RvY29sIGluZm9ybWF0aW9uIGZyb20gYSBVUkwgd2l0aC93aXRob3V0IGRvdWJsZSBzbGFzaCAoXCIvL1wiKS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBVUkwgd2Ugd2FudCB0byBleHRyYWN0IGZyb20uXG4gKiBAcmV0dXJuIHtQcm90b2NvbEV4dHJhY3R9IEV4dHJhY3RlZCBpbmZvcm1hdGlvbi5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBleHRyYWN0UHJvdG9jb2woYWRkcmVzcykge1xuICB2YXIgbWF0Y2ggPSBwcm90b2NvbHJlLmV4ZWMoYWRkcmVzcyk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm90b2NvbDogbWF0Y2hbMV0gPyBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpIDogJycsXG4gICAgc2xhc2hlczogISFtYXRjaFsyXSxcbiAgICByZXN0OiBtYXRjaFszXVxuICB9O1xufVxuXG4vKipcbiAqIFJlc29sdmUgYSByZWxhdGl2ZSBVUkwgcGF0aG5hbWUgYWdhaW5zdCBhIGJhc2UgVVJMIHBhdGhuYW1lLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZSBQYXRobmFtZSBvZiB0aGUgcmVsYXRpdmUgVVJMLlxuICogQHBhcmFtIHtTdHJpbmd9IGJhc2UgUGF0aG5hbWUgb2YgdGhlIGJhc2UgVVJMLlxuICogQHJldHVybiB7U3RyaW5nfSBSZXNvbHZlZCBwYXRobmFtZS5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXNvbHZlKHJlbGF0aXZlLCBiYXNlKSB7XG4gIHZhciBwYXRoID0gKGJhc2UgfHwgJy8nKS5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5jb25jYXQocmVsYXRpdmUuc3BsaXQoJy8nKSlcbiAgICAsIGkgPSBwYXRoLmxlbmd0aFxuICAgICwgbGFzdCA9IHBhdGhbaSAtIDFdXG4gICAgLCB1bnNoaWZ0ID0gZmFsc2VcbiAgICAsIHVwID0gMDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHBhdGhbaV0gPT09ICcuJykge1xuICAgICAgcGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChwYXRoW2ldID09PSAnLi4nKSB7XG4gICAgICBwYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgaWYgKGkgPT09IDApIHVuc2hpZnQgPSB0cnVlO1xuICAgICAgcGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIGlmICh1bnNoaWZ0KSBwYXRoLnVuc2hpZnQoJycpO1xuICBpZiAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHBhdGgucHVzaCgnJyk7XG5cbiAgcmV0dXJuIHBhdGguam9pbignLycpO1xufVxuXG4vKipcbiAqIFRoZSBhY3R1YWwgVVJMIGluc3RhbmNlLiBJbnN0ZWFkIG9mIHJldHVybmluZyBhbiBvYmplY3Qgd2UndmUgb3B0ZWQtaW4gdG9cbiAqIGNyZWF0ZSBhbiBhY3R1YWwgY29uc3RydWN0b3IgYXMgaXQncyBtdWNoIG1vcmUgbWVtb3J5IGVmZmljaWVudCBhbmRcbiAqIGZhc3RlciBhbmQgaXQgcGxlYXNlcyBteSBPQ0QuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBVUkwgd2Ugd2FudCB0byBwYXJzZS5cbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gbG9jYXRpb24gTG9jYXRpb24gZGVmYXVsdHMgZm9yIHJlbGF0aXZlIHBhdGhzLlxuICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSBwYXJzZXIgUGFyc2VyIGZvciB0aGUgcXVlcnkgc3RyaW5nLlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gVVJMKGFkZHJlc3MsIGxvY2F0aW9uLCBwYXJzZXIpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVSTCkpIHtcbiAgICByZXR1cm4gbmV3IFVSTChhZGRyZXNzLCBsb2NhdGlvbiwgcGFyc2VyKTtcbiAgfVxuXG4gIHZhciByZWxhdGl2ZSwgZXh0cmFjdGVkLCBwYXJzZSwgaW5zdHJ1Y3Rpb24sIGluZGV4LCBrZXlcbiAgICAsIGluc3RydWN0aW9ucyA9IHJ1bGVzLnNsaWNlKClcbiAgICAsIHR5cGUgPSB0eXBlb2YgbG9jYXRpb25cbiAgICAsIHVybCA9IHRoaXNcbiAgICAsIGkgPSAwO1xuXG4gIC8vXG4gIC8vIFRoZSBmb2xsb3dpbmcgaWYgc3RhdGVtZW50cyBhbGxvd3MgdGhpcyBtb2R1bGUgdHdvIGhhdmUgY29tcGF0aWJpbGl0eSB3aXRoXG4gIC8vIDIgZGlmZmVyZW50IEFQSTpcbiAgLy9cbiAgLy8gMS4gTm9kZS5qcydzIGB1cmwucGFyc2VgIGFwaSB3aGljaCBhY2NlcHRzIGEgVVJMLCBib29sZWFuIGFzIGFyZ3VtZW50c1xuICAvLyAgICB3aGVyZSB0aGUgYm9vbGVhbiBpbmRpY2F0ZXMgdGhhdCB0aGUgcXVlcnkgc3RyaW5nIHNob3VsZCBhbHNvIGJlIHBhcnNlZC5cbiAgLy9cbiAgLy8gMi4gVGhlIGBVUkxgIGludGVyZmFjZSBvZiB0aGUgYnJvd3NlciB3aGljaCBhY2NlcHRzIGEgVVJMLCBvYmplY3QgYXNcbiAgLy8gICAgYXJndW1lbnRzLiBUaGUgc3VwcGxpZWQgb2JqZWN0IHdpbGwgYmUgdXNlZCBhcyBkZWZhdWx0IHZhbHVlcyAvIGZhbGwtYmFja1xuICAvLyAgICBmb3IgcmVsYXRpdmUgcGF0aHMuXG4gIC8vXG4gIGlmICgnb2JqZWN0JyAhPT0gdHlwZSAmJiAnc3RyaW5nJyAhPT0gdHlwZSkge1xuICAgIHBhcnNlciA9IGxvY2F0aW9uO1xuICAgIGxvY2F0aW9uID0gbnVsbDtcbiAgfVxuXG4gIGlmIChwYXJzZXIgJiYgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHBhcnNlcikgcGFyc2VyID0gcXMucGFyc2U7XG5cbiAgbG9jYXRpb24gPSBsb2xjYXRpb24obG9jYXRpb24pO1xuXG4gIC8vXG4gIC8vIEV4dHJhY3QgcHJvdG9jb2wgaW5mb3JtYXRpb24gYmVmb3JlIHJ1bm5pbmcgdGhlIGluc3RydWN0aW9ucy5cbiAgLy9cbiAgZXh0cmFjdGVkID0gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MgfHwgJycpO1xuICByZWxhdGl2ZSA9ICFleHRyYWN0ZWQucHJvdG9jb2wgJiYgIWV4dHJhY3RlZC5zbGFzaGVzO1xuICB1cmwuc2xhc2hlcyA9IGV4dHJhY3RlZC5zbGFzaGVzIHx8IHJlbGF0aXZlICYmIGxvY2F0aW9uLnNsYXNoZXM7XG4gIHVybC5wcm90b2NvbCA9IGV4dHJhY3RlZC5wcm90b2NvbCB8fCBsb2NhdGlvbi5wcm90b2NvbCB8fCAnJztcbiAgYWRkcmVzcyA9IGV4dHJhY3RlZC5yZXN0O1xuXG4gIC8vXG4gIC8vIFdoZW4gdGhlIGF1dGhvcml0eSBjb21wb25lbnQgaXMgYWJzZW50IHRoZSBVUkwgc3RhcnRzIHdpdGggYSBwYXRoXG4gIC8vIGNvbXBvbmVudC5cbiAgLy9cbiAgaWYgKCFleHRyYWN0ZWQuc2xhc2hlcykgaW5zdHJ1Y3Rpb25zWzJdID0gWy8oLiopLywgJ3BhdGhuYW1lJ107XG5cbiAgZm9yICg7IGkgPCBpbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uc1tpXTtcbiAgICBwYXJzZSA9IGluc3RydWN0aW9uWzBdO1xuICAgIGtleSA9IGluc3RydWN0aW9uWzFdO1xuXG4gICAgaWYgKHBhcnNlICE9PSBwYXJzZSkge1xuICAgICAgdXJsW2tleV0gPSBhZGRyZXNzO1xuICAgIH0gZWxzZSBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBwYXJzZSkge1xuICAgICAgaWYgKH4oaW5kZXggPSBhZGRyZXNzLmluZGV4T2YocGFyc2UpKSkge1xuICAgICAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBpbnN0cnVjdGlvblsyXSkge1xuICAgICAgICAgIHVybFtrZXldID0gYWRkcmVzcy5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoaW5kZXggKyBpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXJsW2tleV0gPSBhZGRyZXNzLnNsaWNlKGluZGV4KTtcbiAgICAgICAgICBhZGRyZXNzID0gYWRkcmVzcy5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChpbmRleCA9IHBhcnNlLmV4ZWMoYWRkcmVzcykpKSB7XG4gICAgICB1cmxba2V5XSA9IGluZGV4WzFdO1xuICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXguaW5kZXgpO1xuICAgIH1cblxuICAgIHVybFtrZXldID0gdXJsW2tleV0gfHwgKFxuICAgICAgcmVsYXRpdmUgJiYgaW5zdHJ1Y3Rpb25bM10gPyBsb2NhdGlvbltrZXldIHx8ICcnIDogJydcbiAgICApO1xuXG4gICAgLy9cbiAgICAvLyBIb3N0bmFtZSwgaG9zdCBhbmQgcHJvdG9jb2wgc2hvdWxkIGJlIGxvd2VyY2FzZWQgc28gdGhleSBjYW4gYmUgdXNlZCB0b1xuICAgIC8vIGNyZWF0ZSBhIHByb3BlciBgb3JpZ2luYC5cbiAgICAvL1xuICAgIGlmIChpbnN0cnVjdGlvbls0XSkgdXJsW2tleV0gPSB1cmxba2V5XS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgLy9cbiAgLy8gQWxzbyBwYXJzZSB0aGUgc3VwcGxpZWQgcXVlcnkgc3RyaW5nIGluIHRvIGFuIG9iamVjdC4gSWYgd2UncmUgc3VwcGxpZWRcbiAgLy8gd2l0aCBhIGN1c3RvbSBwYXJzZXIgYXMgZnVuY3Rpb24gdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBidWlsZC1pblxuICAvLyBwYXJzZXIuXG4gIC8vXG4gIGlmIChwYXJzZXIpIHVybC5xdWVyeSA9IHBhcnNlcih1cmwucXVlcnkpO1xuXG4gIC8vXG4gIC8vIElmIHRoZSBVUkwgaXMgcmVsYXRpdmUsIHJlc29sdmUgdGhlIHBhdGhuYW1lIGFnYWluc3QgdGhlIGJhc2UgVVJMLlxuICAvL1xuICBpZiAoXG4gICAgICByZWxhdGl2ZVxuICAgICYmIGxvY2F0aW9uLnNsYXNoZXNcbiAgICAmJiB1cmwucGF0aG5hbWUuY2hhckF0KDApICE9PSAnLydcbiAgICAmJiAodXJsLnBhdGhuYW1lICE9PSAnJyB8fCBsb2NhdGlvbi5wYXRobmFtZSAhPT0gJycpXG4gICkge1xuICAgIHVybC5wYXRobmFtZSA9IHJlc29sdmUodXJsLnBhdGhuYW1lLCBsb2NhdGlvbi5wYXRobmFtZSk7XG4gIH1cblxuICAvL1xuICAvLyBXZSBzaG91bGQgbm90IGFkZCBwb3J0IG51bWJlcnMgaWYgdGhleSBhcmUgYWxyZWFkeSB0aGUgZGVmYXVsdCBwb3J0IG51bWJlclxuICAvLyBmb3IgYSBnaXZlbiBwcm90b2NvbC4gQXMgdGhlIGhvc3QgYWxzbyBjb250YWlucyB0aGUgcG9ydCBudW1iZXIgd2UncmUgZ29pbmdcbiAgLy8gb3ZlcnJpZGUgaXQgd2l0aCB0aGUgaG9zdG5hbWUgd2hpY2ggY29udGFpbnMgbm8gcG9ydCBudW1iZXIuXG4gIC8vXG4gIGlmICghcmVxdWlyZWQodXJsLnBvcnQsIHVybC5wcm90b2NvbCkpIHtcbiAgICB1cmwuaG9zdCA9IHVybC5ob3N0bmFtZTtcbiAgICB1cmwucG9ydCA9ICcnO1xuICB9XG5cbiAgLy9cbiAgLy8gUGFyc2UgZG93biB0aGUgYGF1dGhgIGZvciB0aGUgdXNlcm5hbWUgYW5kIHBhc3N3b3JkLlxuICAvL1xuICB1cmwudXNlcm5hbWUgPSB1cmwucGFzc3dvcmQgPSAnJztcbiAgaWYgKHVybC5hdXRoKSB7XG4gICAgaW5zdHJ1Y3Rpb24gPSB1cmwuYXV0aC5zcGxpdCgnOicpO1xuICAgIHVybC51c2VybmFtZSA9IGluc3RydWN0aW9uWzBdIHx8ICcnO1xuICAgIHVybC5wYXNzd29yZCA9IGluc3RydWN0aW9uWzFdIHx8ICcnO1xuICB9XG5cbiAgdXJsLm9yaWdpbiA9IHVybC5wcm90b2NvbCAmJiB1cmwuaG9zdCAmJiB1cmwucHJvdG9jb2wgIT09ICdmaWxlOidcbiAgICA/IHVybC5wcm90b2NvbCArJy8vJysgdXJsLmhvc3RcbiAgICA6ICdudWxsJztcblxuICAvL1xuICAvLyBUaGUgaHJlZiBpcyBqdXN0IHRoZSBjb21waWxlZCByZXN1bHQuXG4gIC8vXG4gIHVybC5ocmVmID0gdXJsLnRvU3RyaW5nKCk7XG59XG5cbi8qKlxuICogVGhpcyBpcyBjb252ZW5pZW5jZSBtZXRob2QgZm9yIGNoYW5naW5nIHByb3BlcnRpZXMgaW4gdGhlIFVSTCBpbnN0YW5jZSB0b1xuICogaW5zdXJlIHRoYXQgdGhleSBhbGwgcHJvcGFnYXRlIGNvcnJlY3RseS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFydCAgICAgICAgICBQcm9wZXJ0eSB3ZSBuZWVkIHRvIGFkanVzdC5cbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlICAgICAgICAgIFRoZSBuZXdseSBhc3NpZ25lZCB2YWx1ZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gZm4gIFdoZW4gc2V0dGluZyB0aGUgcXVlcnksIGl0IHdpbGwgYmUgdGhlIGZ1bmN0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VkIHRvIHBhcnNlIHRoZSBxdWVyeS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdoZW4gc2V0dGluZyB0aGUgcHJvdG9jb2wsIGRvdWJsZSBzbGFzaCB3aWxsIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkIGZyb20gdGhlIGZpbmFsIHVybCBpZiBpdCBpcyB0cnVlLlxuICogQHJldHVybnMge1VSTH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHNldChwYXJ0LCB2YWx1ZSwgZm4pIHtcbiAgdmFyIHVybCA9IHRoaXM7XG5cbiAgc3dpdGNoIChwYXJ0KSB7XG4gICAgY2FzZSAncXVlcnknOlxuICAgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgdmFsdWUgJiYgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHZhbHVlID0gKGZuIHx8IHFzLnBhcnNlKSh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdwb3J0JzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAoIXJlcXVpcmVkKHZhbHVlLCB1cmwucHJvdG9jb2wpKSB7XG4gICAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgICAgICB1cmxbcGFydF0gPSAnJztcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWUgKyc6JysgdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaG9zdG5hbWUnOlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG5cbiAgICAgIGlmICh1cmwucG9ydCkgdmFsdWUgKz0gJzonKyB1cmwucG9ydDtcbiAgICAgIHVybC5ob3N0ID0gdmFsdWU7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2hvc3QnOlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG5cbiAgICAgIGlmICgvOlxcZCskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgICAgIHVybC5wb3J0ID0gdmFsdWUucG9wKCk7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHZhbHVlLmpvaW4oJzonKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHZhbHVlO1xuICAgICAgICB1cmwucG9ydCA9ICcnO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3Byb3RvY29sJzpcbiAgICAgIHVybC5wcm90b2NvbCA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICB1cmwuc2xhc2hlcyA9ICFmbjtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncGF0aG5hbWUnOlxuICAgICAgdXJsLnBhdGhuYW1lID0gdmFsdWUubGVuZ3RoICYmIHZhbHVlLmNoYXJBdCgwKSAhPT0gJy8nID8gJy8nICsgdmFsdWUgOiB2YWx1ZTtcblxuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGlucyA9IHJ1bGVzW2ldO1xuXG4gICAgaWYgKGluc1s0XSkgdXJsW2luc1sxXV0gPSB1cmxbaW5zWzFdXS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgdXJsLm9yaWdpbiA9IHVybC5wcm90b2NvbCAmJiB1cmwuaG9zdCAmJiB1cmwucHJvdG9jb2wgIT09ICdmaWxlOidcbiAgICA/IHVybC5wcm90b2NvbCArJy8vJysgdXJsLmhvc3RcbiAgICA6ICdudWxsJztcblxuICB1cmwuaHJlZiA9IHVybC50b1N0cmluZygpO1xuXG4gIHJldHVybiB1cmw7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgcHJvcGVydGllcyBiYWNrIGluIHRvIGEgdmFsaWQgYW5kIGZ1bGwgVVJMIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdHJpbmdpZnkgT3B0aW9uYWwgcXVlcnkgc3RyaW5naWZ5IGZ1bmN0aW9uLlxuICogQHJldHVybnMge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHN0cmluZ2lmeSkge1xuICBpZiAoIXN0cmluZ2lmeSB8fCAnZnVuY3Rpb24nICE9PSB0eXBlb2Ygc3RyaW5naWZ5KSBzdHJpbmdpZnkgPSBxcy5zdHJpbmdpZnk7XG5cbiAgdmFyIHF1ZXJ5XG4gICAgLCB1cmwgPSB0aGlzXG4gICAgLCBwcm90b2NvbCA9IHVybC5wcm90b2NvbDtcblxuICBpZiAocHJvdG9jb2wgJiYgcHJvdG9jb2wuY2hhckF0KHByb3RvY29sLmxlbmd0aCAtIDEpICE9PSAnOicpIHByb3RvY29sICs9ICc6JztcblxuICB2YXIgcmVzdWx0ID0gcHJvdG9jb2wgKyAodXJsLnNsYXNoZXMgPyAnLy8nIDogJycpO1xuXG4gIGlmICh1cmwudXNlcm5hbWUpIHtcbiAgICByZXN1bHQgKz0gdXJsLnVzZXJuYW1lO1xuICAgIGlmICh1cmwucGFzc3dvcmQpIHJlc3VsdCArPSAnOicrIHVybC5wYXNzd29yZDtcbiAgICByZXN1bHQgKz0gJ0AnO1xuICB9XG5cbiAgcmVzdWx0ICs9IHVybC5ob3N0ICsgdXJsLnBhdGhuYW1lO1xuXG4gIHF1ZXJ5ID0gJ29iamVjdCcgPT09IHR5cGVvZiB1cmwucXVlcnkgPyBzdHJpbmdpZnkodXJsLnF1ZXJ5KSA6IHVybC5xdWVyeTtcbiAgaWYgKHF1ZXJ5KSByZXN1bHQgKz0gJz8nICE9PSBxdWVyeS5jaGFyQXQoMCkgPyAnPycrIHF1ZXJ5IDogcXVlcnk7XG5cbiAgaWYgKHVybC5oYXNoKSByZXN1bHQgKz0gdXJsLmhhc2g7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuVVJMLnByb3RvdHlwZSA9IHsgc2V0OiBzZXQsIHRvU3RyaW5nOiB0b1N0cmluZyB9O1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBVUkwgcGFyc2VyIGFuZCBzb21lIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0aGF0IG1pZ2h0IGJlIHVzZWZ1bCBmb3Jcbi8vIG90aGVycyBvciB0ZXN0aW5nLlxuLy9cblVSTC5leHRyYWN0UHJvdG9jb2wgPSBleHRyYWN0UHJvdG9jb2w7XG5VUkwubG9jYXRpb24gPSBsb2xjYXRpb247XG5VUkwucXMgPSBxcztcblxubW9kdWxlLmV4cG9ydHMgPSBVUkw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vdXJsLXBhcnNlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCB1cFRvIGZyb20gJy4uLy4uL3V0aWxzL3VwLXRvJ1xuXG4vKipcbiAqIENyZWF0ZSBhIGZvbnQgYXdlc29tZSBpY29uIG5vZGUuXG4gKlxuICogQHBhcmFtIGljb25cbiAqIEBwYXJhbSBuYW1lXG4gKlxuICogQHJldHVybnMgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGljb25Ob2RlIChpY29uLCBuYW1lKSB7XG4gIHJldHVybiBgPGkgY2xhc3M9XCJmYSBmYS1mdyBmYS0ke2ljb259XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgZGF0YS1ob3Zlcj1cInRvb2x0aXBcIiBkYXRhLXRvb2x0aXAtZGVsYXk9XCIzNTBcIiBkYXRhLXRvb2x0aXAtY29udGVudD1cIiR7bmFtZX1cIj48L2k+YFxufVxuXG4vKipcbiAqIEFkZCBidXR0b25zIGluIHRoZSByaWdodCBvZiBzZWFyY2ggYmFyLlxuICpcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIG5vZGUuY2xhc3NOYW1lID0gJ2N1c3RvbS1idXR0b24nXG4gIG5vZGUuaW5uZXJIVE1MID0gYFxuJHtpY29uTm9kZSgnZmlyZScsICfnhrHploDnsonlsIgnKX1cbiR7aWNvbk5vZGUoJ2Jhci1jaGFydCcsICflgIvkurrntbHoqIgnKX1cbiR7aWNvbk5vZGUoJ2hpc3RvcnknLCAn5q235Y+y5Zue6aGnJyl9XG4ke2ljb25Ob2RlKCdjb2cnLCAn6Kit5a6aJyl9YFxuXG4gIHVwVG8oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmN1c3RvbS1zZWFyY2gtYmFyJyksICdkaXYnKS5hcHBlbmQobm9kZSlcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLWJ1dHRvbiBpJykuZm9yRWFjaChub2RlID0+IHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXN0b20tbW9kYWwtdGl0bGUnKS5pbm5lclRleHQgPSBlLnRhcmdldC5kYXRhc2V0LnRvb2x0aXBDb250ZW50XG4gICAgfSlcbiAgfSlcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb250ZW50LXNjcmlwdHMvaW5pdGlhbGl6YXRpb25zL2J1dHRvbi5qcyIsIi8qKlxuICogQWRkIG1vZGFsLlxuICpcbiAqIEByZXR1cm5zIHZvaWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIG5vZGUuY2xhc3NOYW1lID0gJ2N1c3RvbS1tb2RhbCdcbiAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gIG5vZGUuaW5uZXJIVE1MID0gYFxuPGRpdiBjbGFzcz1cImJhY2tncm91bmRcIj48L2Rpdj5cbjxkaXYgY2xhc3M9XCJib3hcIj5cbiAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tbGVmdDogMXJlbTtcIj5cbiAgICAgIDxiIGlkPVwiY3VzdG9tLW1vZGFsLXRpdGxlXCI+PC9iPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjbG9zZS1idXR0b25cIj5cbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtbGcgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPjwvZGl2PlxuPC9kaXY+YFxuXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kKG5vZGUpXG5cbiAgY29uc3QgY2xvc2VFdmVudCA9ICgpID0+IHtcbiAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfVxuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tbW9kYWwgLmJhY2tncm91bmQnKS5vbmNsaWNrID0gY2xvc2VFdmVudFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLW1vZGFsIC5jbG9zZS1idXR0b24gaScpLm9uY2xpY2sgPSBjbG9zZUV2ZW50XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udGVudC1zY3JpcHRzL2luaXRpYWxpemF0aW9ucy9tb2RhbC5qcyIsIi8qKlxuICogQWRkIGNsYXNzIHRvIGZhY2Vib29rIG5hdmJhci5cbiAqXG4gKiBAcGFyYW0gZG9tXG4gKlxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGRvbSA9PiB7XG4gIGRvbS5jbGFzc05hbWUgKz0gJyBjdXN0b20tbmF2YmFyJ1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbnRlbnQtc2NyaXB0cy9pbml0aWFsaXphdGlvbnMvbmF2YmFyLmpzIiwiLyoqXG4gKiBBZGQgc2VhcmNoIGJhciBpbiB0aGUgcmlnaHQgb2YgZmFjZWJvb2sgc2VhcmNoIGJhci5cbiAqXG4gKiBAcGFyYW0gZG9tXG4gKlxuICogQHJldHVybnMgdm9pZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGRvbSA9PiB7XG4gIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIG5vZGUuY2xhc3NOYW1lID0gJ2N1c3RvbS1zZWFyY2gtYmFyJ1xuICBub2RlLmlubmVySFRNTCA9IGBcbjxmb3JtPlxuICA8ZGl2PlxuICAgIDxpbnB1dCBpZD1cImN1c3RvbS1zZWFyY2gtaW5wdXRcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIERCXCI+XG4gIDwvZGl2PlxuPC9mb3JtPmBcblxuICBkb20uYXBwZW5kKG5vZGUpXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udGVudC1zY3JpcHRzL2luaXRpYWxpemF0aW9ucy9zZWFyY2gtYmFyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBTaW1wbGUgcXVlcnkgc3RyaW5nIHBhcnNlci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcXVlcnkgVGhlIHF1ZXJ5IHN0cmluZyB0aGF0IG5lZWRzIHRvIGJlIHBhcnNlZC5cbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeSkge1xuICB2YXIgcGFyc2VyID0gLyhbXj0/Jl0rKT0/KFteJl0qKS9nXG4gICAgLCByZXN1bHQgPSB7fVxuICAgICwgcGFydDtcblxuICAvL1xuICAvLyBMaXR0bGUgbmlmdHkgcGFyc2luZyBoYWNrLCBsZXZlcmFnZSB0aGUgZmFjdCB0aGF0IFJlZ0V4cC5leGVjIGluY3JlbWVudHNcbiAgLy8gdGhlIGxhc3RJbmRleCBwcm9wZXJ0eSBzbyB3ZSBjYW4gY29udGludWUgZXhlY3V0aW5nIHRoaXMgbG9vcCB1bnRpbCB3ZSd2ZVxuICAvLyBwYXJzZWQgYWxsIHJlc3VsdHMuXG4gIC8vXG4gIGZvciAoO1xuICAgIHBhcnQgPSBwYXJzZXIuZXhlYyhxdWVyeSk7XG4gICAgcmVzdWx0W2RlY29kZVVSSUNvbXBvbmVudChwYXJ0WzFdKV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFydFsyXSlcbiAgKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybSBhIHF1ZXJ5IHN0cmluZyB0byBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBPYmplY3QgdGhhdCBzaG91bGQgYmUgdHJhbnNmb3JtZWQuXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4IE9wdGlvbmFsIHByZWZpeC5cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBxdWVyeXN0cmluZ2lmeShvYmosIHByZWZpeCkge1xuICBwcmVmaXggPSBwcmVmaXggfHwgJyc7XG5cbiAgdmFyIHBhaXJzID0gW107XG5cbiAgLy9cbiAgLy8gT3B0aW9uYWxseSBwcmVmaXggd2l0aCBhICc/JyBpZiBuZWVkZWRcbiAgLy9cbiAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgcHJlZml4KSBwcmVmaXggPSAnPyc7XG5cbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIHBhaXJzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyc9JysgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtrZXldKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhaXJzLmxlbmd0aCA/IHByZWZpeCArIHBhaXJzLmpvaW4oJyYnKSA6ICcnO1xufVxuXG4vL1xuLy8gRXhwb3NlIHRoZSBtb2R1bGUuXG4vL1xuZXhwb3J0cy5zdHJpbmdpZnkgPSBxdWVyeXN0cmluZ2lmeTtcbmV4cG9ydHMucGFyc2UgPSBxdWVyeXN0cmluZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9xdWVyeXN0cmluZ2lmeS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2hlY2sgaWYgd2UncmUgcmVxdWlyZWQgdG8gYWRkIGEgcG9ydCBudW1iZXIuXG4gKlxuICogQHNlZSBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RlZmF1bHQtcG9ydFxuICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBwb3J0IFBvcnQgbnVtYmVyIHdlIG5lZWQgdG8gY2hlY2tcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbCBQcm90b2NvbCB3ZSBuZWVkIHRvIGNoZWNrIGFnYWluc3QuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gSXMgaXQgYSBkZWZhdWx0IHBvcnQgZm9yIHRoZSBnaXZlbiBwcm90b2NvbFxuICogQGFwaSBwcml2YXRlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWlyZWQocG9ydCwgcHJvdG9jb2wpIHtcbiAgcHJvdG9jb2wgPSBwcm90b2NvbC5zcGxpdCgnOicpWzBdO1xuICBwb3J0ID0gK3BvcnQ7XG5cbiAgaWYgKCFwb3J0KSByZXR1cm4gZmFsc2U7XG5cbiAgc3dpdGNoIChwcm90b2NvbCkge1xuICAgIGNhc2UgJ2h0dHAnOlxuICAgIGNhc2UgJ3dzJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gODA7XG5cbiAgICBjYXNlICdodHRwcyc6XG4gICAgY2FzZSAnd3NzJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gNDQzO1xuXG4gICAgY2FzZSAnZnRwJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gMjE7XG5cbiAgICBjYXNlICdnb3BoZXInOlxuICAgIHJldHVybiBwb3J0ICE9PSA3MDtcblxuICAgIGNhc2UgJ2ZpbGUnOlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBwb3J0ICE9PSAwO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9yZXF1aXJlcy1wb3J0L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHNsYXNoZXMgPSAvXltBLVphLXpdW0EtWmEtejAtOSstLl0qOlxcL1xcLy87XG5cbi8qKlxuICogVGhlc2UgcHJvcGVydGllcyBzaG91bGQgbm90IGJlIGNvcGllZCBvciBpbmhlcml0ZWQgZnJvbS4gVGhpcyBpcyBvbmx5IG5lZWRlZFxuICogZm9yIGFsbCBub24gYmxvYiBVUkwncyBhcyBhIGJsb2IgVVJMIGRvZXMgbm90IGluY2x1ZGUgYSBoYXNoLCBvbmx5IHRoZVxuICogb3JpZ2luLlxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgaWdub3JlID0geyBoYXNoOiAxLCBxdWVyeTogMSB9XG4gICwgVVJMO1xuXG4vKipcbiAqIFRoZSBsb2NhdGlvbiBvYmplY3QgZGlmZmVycyB3aGVuIHlvdXIgY29kZSBpcyBsb2FkZWQgdGhyb3VnaCBhIG5vcm1hbCBwYWdlLFxuICogV29ya2VyIG9yIHRocm91Z2ggYSB3b3JrZXIgdXNpbmcgYSBibG9iLiBBbmQgd2l0aCB0aGUgYmxvYmJsZSBiZWdpbnMgdGhlXG4gKiB0cm91YmxlIGFzIHRoZSBsb2NhdGlvbiBvYmplY3Qgd2lsbCBjb250YWluIHRoZSBVUkwgb2YgdGhlIGJsb2IsIG5vdCB0aGVcbiAqIGxvY2F0aW9uIG9mIHRoZSBwYWdlIHdoZXJlIG91ciBjb2RlIGlzIGxvYWRlZCBpbi4gVGhlIGFjdHVhbCBvcmlnaW4gaXNcbiAqIGVuY29kZWQgaW4gdGhlIGBwYXRobmFtZWAgc28gd2UgY2FuIHRoYW5rZnVsbHkgZ2VuZXJhdGUgYSBnb29kIFwiZGVmYXVsdFwiXG4gKiBsb2NhdGlvbiBmcm9tIGl0IHNvIHdlIGNhbiBnZW5lcmF0ZSBwcm9wZXIgcmVsYXRpdmUgVVJMJ3MgYWdhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBsb2MgT3B0aW9uYWwgZGVmYXVsdCBsb2NhdGlvbiBvYmplY3QuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBsb2xjYXRpb24gb2JqZWN0LlxuICogQGFwaSBwdWJsaWNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsb2xjYXRpb24obG9jKSB7XG4gIGxvYyA9IGxvYyB8fCBnbG9iYWwubG9jYXRpb24gfHwge307XG4gIFVSTCA9IFVSTCB8fCByZXF1aXJlKCcuLycpO1xuXG4gIHZhciBmaW5hbGRlc3RpbmF0aW9uID0ge31cbiAgICAsIHR5cGUgPSB0eXBlb2YgbG9jXG4gICAgLCBrZXk7XG5cbiAgaWYgKCdibG9iOicgPT09IGxvYy5wcm90b2NvbCkge1xuICAgIGZpbmFsZGVzdGluYXRpb24gPSBuZXcgVVJMKHVuZXNjYXBlKGxvYy5wYXRobmFtZSksIHt9KTtcbiAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZSkge1xuICAgIGZpbmFsZGVzdGluYXRpb24gPSBuZXcgVVJMKGxvYywge30pO1xuICAgIGZvciAoa2V5IGluIGlnbm9yZSkgZGVsZXRlIGZpbmFsZGVzdGluYXRpb25ba2V5XTtcbiAgfSBlbHNlIGlmICgnb2JqZWN0JyA9PT0gdHlwZSkge1xuICAgIGZvciAoa2V5IGluIGxvYykge1xuICAgICAgaWYgKGtleSBpbiBpZ25vcmUpIGNvbnRpbnVlO1xuICAgICAgZmluYWxkZXN0aW5hdGlvbltrZXldID0gbG9jW2tleV07XG4gICAgfVxuXG4gICAgaWYgKGZpbmFsZGVzdGluYXRpb24uc2xhc2hlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaW5hbGRlc3RpbmF0aW9uLnNsYXNoZXMgPSBzbGFzaGVzLnRlc3QobG9jLmhyZWYpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaW5hbGRlc3RpbmF0aW9uO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi91cmwtcGFyc2UvbG9sY2F0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHVwVG8gZnJvbSAnLi4vdXRpbHMvdXAtdG8nXG5cbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgaWYgKCdpbnRlcmFjdGl2ZScgPT09IGRvY3VtZW50LnJlYWR5U3RhdGUpIHtcbiAgICBjb25zdCBkb20gPSAoKCkgPT4ge1xuICAgICAgbGV0IGRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdltyb2xlPVwic2VhcmNoXCJdJylcblxuICAgICAgaWYgKCEgZG9tKSB7XG4gICAgICAgIGRvbSA9IHVwVG8oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtyb2xlPVwic2VhcmNoXCJdJyksICdkaXYnKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXBUbyhkb20sICdkaXYnKVxuICAgIH0pKClcblxuICAgIHJlcXVpcmUoJy4vaW5pdGlhbGl6YXRpb25zL25hdmJhcicpKGRvbSlcbiAgICByZXF1aXJlKCcuL2luaXRpYWxpemF0aW9ucy9zZWFyY2gtYmFyJykoZG9tKVxuICAgIHJlcXVpcmUoJy4vaW5pdGlhbGl6YXRpb25zL2J1dHRvbicpKClcbiAgICByZXF1aXJlKCcuL2luaXRpYWxpemF0aW9ucy9tb2RhbCcpKClcblxuICAgIHJlcXVpcmUoJy4vbW9uaXRvcnMvZmFjZWJvb2stc2VhcmNoJykoKVxuICAgIHJlcXVpcmUoJy4vbW9uaXRvcnMvdXNlci1mZWVkJykoKVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udGVudC1zY3JpcHRzL2luZGV4LmpzIiwiLyoqXG4gKiBMaXN0ZW4gZm9yIGZhY2Vib29rIHNlYXJjaC5cbiAqXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbmNvbnN0IHNlYXJjaCA9ICgpID0+IHtcbiAgY29uc3QgZmJTZWFyY2hJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwicVwiXScpXG5cbiAgaWYgKDIgPiBmYlNlYXJjaElucHV0cy5sZW5ndGggJiYgISBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcScpKSB7XG4gICAgd2luZG93LnNldFRpbWVvdXQoc2VhcmNoLCAxMDAwKVxuICB9IGVsc2Uge1xuICAgIGZiU2VhcmNoSW5wdXRzLml0ZW0oZmJTZWFyY2hJbnB1dHMubGVuZ3RoIC0gMSkuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1c3RvbS1zZWFyY2gtaW5wdXQnKS52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgfSlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNlYXJjaFxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbnRlbnQtc2NyaXB0cy9tb25pdG9ycy9mYWNlYm9vay1zZWFyY2guanMiLCJpbXBvcnQgcGFyc2UgZnJvbSAndXJsLXBhcnNlJ1xuaW1wb3J0IHVwVG8gZnJvbSAnLi4vLi4vdXRpbHMvdXAtdG8nXG5cbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuICBjb25zdCByZXRyaWV2ZUZiaWRGcm9tVXJsID0gKHVybCkgPT4ge1xuICAgIGlmICh1cmwuZW5kc1dpdGgoJzozJykgfHwgdXJsLmluY2x1ZGVzKCdzdG9yeV9mYmlkJykpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSBlbHNlIGlmICh1cmwuaW5jbHVkZXMoJ3Bob3RvLnBocCcpKSB7XG4gICAgICByZXR1cm4gcGFyc2UodXJsLCB0cnVlKS5xdWVyeS5mYmlkc3NzIHx8IG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBxdWV1ZSA9IHVybC5zcGxpdCgnLycpXG5cbiAgICBpZiAodXJsLmluY2x1ZGVzKCdwaG90b3MnKSB8fCB1cmwuZW5kc1dpdGgoJy8nKSkge1xuICAgICAgcXVldWUucG9wKClcbiAgICB9XG5cbiAgICByZXR1cm4gcXVldWUucG9wKClcbiAgfVxuICBjb25zdCBpc0ZlZWRJblNjcmVlbiA9IChmZWVkKSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IGZlZWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBjb25zdCBzY3JlZW4gPSB7XG4gICAgICB0b3A6IHdpbmRvdy5zY3JvbGxZLFxuICAgICAgYm90dG9tOiB3aW5kb3cuc2Nyb2xsWSArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICB9XG4gICAgY29uc3QgZWwgPSB7XG4gICAgICB0b3A6IGZlZWQub2Zmc2V0VG9wICsgcmVjdC5oZWlnaHQgLyAzLFxuICAgICAgYm90dG9tOiBmZWVkLm9mZnNldFRvcCArIHJlY3QuaGVpZ2h0IC8gMyAqIDJcbiAgICB9XG5cbiAgICBpZiAoZWwudG9wID4gc2NyZWVuLnRvcCAmJiBlbC50b3AgPCBzY3JlZW4uYm90dG9tKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoZWwuYm90dG9tID4gc2NyZWVuLnRvcCAmJiBlbC5ib3R0b20gPCBzY3JlZW4uYm90dG9tKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgbGV0IGxhc3RZID0gMFxuICBjb25zdCBmZWVkcyA9IFtdXG5cbiAgd2luZG93Lm9uc2Nyb2xsID0gKCkgPT4ge1xuICAgIGlmICgnLycgIT09IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgbGFzdFkgPSAwXG5cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltpZF49XCJoeXBlcmZlZWRfc3RvcnlfaWRcIl0nKS5mb3JFYWNoKGZlZWQgPT4ge1xuICAgICAgY29uc3QgaXNTcG9uc29yZWQgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZl49XCJodHRwczovL2wuZmFjZWJvb2suY29tL2wucGhwXCJdJylcblxuICAgICAgaWYgKGlzU3BvbnNvcmVkKSB7XG4gICAgICAgIHN3aXRjaCAoaXNTcG9uc29yZWQuaW5uZXJUZXh0KSB7XG4gICAgICAgICAgY2FzZSAnU3BvbnNvcmVkJzpcbiAgICAgICAgICBjYXNlICfotIrliqknOlxuICAgICAgICAgIGNhc2UgJ+W6g+WRiic6XG4gICAgICAgICAgICByZXR1cm4gZmVlZC5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZlZWRUaW1lID0gZmVlZC5xdWVyeVNlbGVjdG9yKCdhYmJyLnRpbWVzdGFtcC5saXZldGltZXN0YW1wJylcblxuICAgICAgaWYgKCEgZmVlZFRpbWUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxldCBpc1B1YmxpYyA9IHVwVG8oZmVlZFRpbWUsICdkaXYnKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS10b29sdGlwLWNvbnRlbnRdJylcblxuICAgICAgaWYgKCEgaXNQdWJsaWMpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlzUHVibGljID0gaXNQdWJsaWMuZ2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtY29udGVudCcpXG5cbiAgICAgIGlmIChpc1B1YmxpYy5pbmNsdWRlcygnUHVibGljJykgfHwgaXNQdWJsaWMuaW5jbHVkZXMoJ+WFrOmWiycpKSB7XG4gICAgICAgIGNvbnN0IGZiaWQgPSByZXRyaWV2ZUZiaWRGcm9tVXJsKHVwVG8oZmVlZFRpbWUsICdhJykuaHJlZilcblxuICAgICAgICBpZiAoZmJpZCAmJiAhIGZlZWRzLmluY2x1ZGVzKGZiaWQpKSB7XG4gICAgICAgICAgZmVlZHMucHVzaChmYmlkKVxuXG4gICAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgZmVlZHMgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0ZlZWRJblNjcmVlbihmZWVkKSkge1xuICAgICAgICAgIGlmICgwID4gd2luZG93LnNjcm9sbFkgLSBsYXN0WSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2JhY2snLCBmYmlkKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmYmlkKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBsYXN0WSA9IHdpbmRvdy5zY3JvbGxZXG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb250ZW50LXNjcmlwdHMvbW9uaXRvcnMvdXNlci1mZWVkLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==